{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///E:/robinson-family-tree/src/providers/QueryProvider.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\r\n\r\nconst queryClient = new QueryClient({\r\n  defaultOptions: {\r\n    queries: {\r\n      staleTime: 5 * 60 * 1000, // 5分钟\r\n      retry: 2,\r\n      refetchOnWindowFocus: false,\r\n    },\r\n  },\r\n});\r\n\r\ninterface QueryProviderProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nconst QueryProvider: React.FC<QueryProviderProps> = ({ children }) => {\r\n  return (\r\n    <QueryClientProvider client={queryClient}>\r\n      {children}\r\n    </QueryClientProvider>\r\n  );\r\n};\r\n\r\nexport default QueryProvider;"],"names":[],"mappings":";;;;;AAGA;AAAA;AAHA;;;AAKA,MAAM,cAAc,IAAI,4LAAW,CAAC;IAClC,gBAAgB;QACd,SAAS;YACP,WAAW,IAAI,KAAK;YACpB,OAAO;YACP,sBAAsB;QACxB;IACF;AACF;AAMA,MAAM,gBAA8C,CAAC,EAAE,QAAQ,EAAE;IAC/D,qBACE,8OAAC,6MAAmB;QAAC,QAAQ;kBAC1B;;;;;;AAGP;uCAEe"}},
    {"offset": {"line": 44, "column": 0}, "map": {"version":3,"sources":["file:///E:/robinson-family-tree/src/components/Toast.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useEffect } from 'react';\r\n\r\ninterface ToastProps {\r\n  message: string;\r\n  type: 'success' | 'error' | 'info';\r\n  onClose: () => void;\r\n  duration?: number;\r\n}\r\n\r\nconst Toast: React.FC<ToastProps> = ({ message, type, onClose, duration = 3000 }) => {\r\n  useEffect(() => {\r\n    const timer = setTimeout(onClose, duration);\r\n    return () => clearTimeout(timer);\r\n  }, [onClose, duration]);\r\n\r\n  const getTypeStyles = () => {\r\n    switch (type) {\r\n      case 'success':\r\n        return {\r\n          bg: 'bg-green-500',\r\n          border: 'border-green-600',\r\n          icon: 'check_circle'\r\n        };\r\n      case 'error':\r\n        return {\r\n          bg: 'bg-red-500',\r\n          border: 'border-red-600',\r\n          icon: 'error'\r\n        };\r\n      case 'info':\r\n        return {\r\n          bg: 'bg-blue-500',\r\n          border: 'border-blue-600',\r\n          icon: 'info'\r\n        };\r\n      default:\r\n        return {\r\n          bg: 'bg-gray-500',\r\n          border: 'border-gray-600',\r\n          icon: 'info'\r\n        };\r\n    }\r\n  };\r\n\r\n  const styles = getTypeStyles();\r\n\r\n  return (\r\n    <div className=\"fixed top-20 right-4 z-50 animate-slide-in\">\r\n      <div className={`${styles.bg} ${styles.border} border rounded-lg shadow-lg p-4 flex items-center gap-3 min-w-[300px] max-w-md`}>\r\n        <div className=\"flex-shrink-0\">\r\n          <span className={`material-symbols-outlined text-white`}>\r\n            {styles.icon}\r\n          </span>\r\n        </div>\r\n        <div className=\"flex-1\">\r\n          <p className=\"text-white font-medium\">{message}</p>\r\n        </div>\r\n        <button \r\n          onClick={onClose}\r\n          className=\"flex-shrink-0 p-1 rounded-full hover:bg-white/20 transition-colors\"\r\n        >\r\n          <span className=\"material-symbols-outlined text-white text-sm\">\r\n            close\r\n          </span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Toast;"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAWA,MAAM,QAA8B,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,WAAW,IAAI,EAAE;IAC9E,IAAA,kNAAS,EAAC;QACR,MAAM,QAAQ,WAAW,SAAS;QAClC,OAAO,IAAM,aAAa;IAC5B,GAAG;QAAC;QAAS;KAAS;IAEtB,MAAM,gBAAgB;QACpB,OAAQ;YACN,KAAK;gBACH,OAAO;oBACL,IAAI;oBACJ,QAAQ;oBACR,MAAM;gBACR;YACF,KAAK;gBACH,OAAO;oBACL,IAAI;oBACJ,QAAQ;oBACR,MAAM;gBACR;YACF,KAAK;gBACH,OAAO;oBACL,IAAI;oBACJ,QAAQ;oBACR,MAAM;gBACR;YACF;gBACE,OAAO;oBACL,IAAI;oBACJ,QAAQ;oBACR,MAAM;gBACR;QACJ;IACF;IAEA,MAAM,SAAS;IAEf,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAW,GAAG,OAAO,EAAE,CAAC,CAAC,EAAE,OAAO,MAAM,CAAC,+EAA+E,CAAC;;8BAC5H,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAK,WAAW,CAAC,oCAAoC,CAAC;kCACpD,OAAO,IAAI;;;;;;;;;;;8BAGhB,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAE,WAAU;kCAA0B;;;;;;;;;;;8BAEzC,8OAAC;oBACC,SAAS;oBACT,WAAU;8BAEV,cAAA,8OAAC;wBAAK,WAAU;kCAA+C;;;;;;;;;;;;;;;;;;;;;;AAOzE;uCAEe"}},
    {"offset": {"line": 158, "column": 0}, "map": {"version":3,"sources":["file:///E:/robinson-family-tree/src/providers/ToastProvider.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, createContext, useContext, ReactNode } from 'react';\r\nimport Toast from '../components/Toast';\r\n\r\ninterface ToastMessage {\r\n  id: string;\r\n  message: string;\r\n  type: 'success' | 'error' | 'info';\r\n  duration?: number;\r\n}\r\n\r\ninterface ToastContextType {\r\n  showToast: (message: string, type: 'success' | 'error' | 'info', duration?: number) => void;\r\n  showSuccess: (message: string, duration?: number) => void;\r\n  showError: (message: string, duration?: number) => void;\r\n  showInfo: (message: string, duration?: number) => void;\r\n}\r\n\r\nconst ToastContext = createContext<ToastContextType | undefined>(undefined);\r\n\r\nexport const useToast = () => {\r\n  const context = useContext(ToastContext);\r\n  if (!context) {\r\n    throw new Error('useToast must be used within a ToastProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\ninterface ToastProviderProps {\r\n  children: ReactNode;\r\n}\r\n\r\nconst ToastProvider: React.FC<ToastProviderProps> = ({ children }) => {\r\n  const [toasts, setToasts] = useState<ToastMessage[]>([]);\r\n\r\n  const showToast = (message: string, type: 'success' | 'error' | 'info', duration?: number) => {\r\n    const id = crypto.randomUUID();\r\n    setToasts(prev => [...prev, { id, message, type, duration }]);\r\n  };\r\n\r\n  const showSuccess = (message: string, duration?: number) => {\r\n    showToast(message, 'success', duration);\r\n  };\r\n\r\n  const showError = (message: string, duration?: number) => {\r\n    showToast(message, 'error', duration);\r\n  };\r\n\r\n  const showInfo = (message: string, duration?: number) => {\r\n    showToast(message, 'info', duration);\r\n  };\r\n\r\n  const removeToast = (id: string) => {\r\n    setToasts(prev => prev.filter(toast => toast.id !== id));\r\n  };\r\n\r\n  const value = {\r\n    showToast,\r\n    showSuccess,\r\n    showError,\r\n    showInfo\r\n  };\r\n\r\n  return (\r\n    <ToastContext.Provider value={value}>\r\n      {children}\r\n      {toasts.map(toast => (\r\n        <Toast\r\n          key={toast.id}\r\n          message={toast.message}\r\n          type={toast.type}\r\n          onClose={() => removeToast(toast.id)}\r\n          duration={toast.duration}\r\n        />\r\n      ))}\r\n    </ToastContext.Provider>\r\n  );\r\n};\r\n\r\nexport default ToastProvider;"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAHA;;;;AAmBA,MAAM,6BAAe,IAAA,sNAAa,EAA+B;AAE1D,MAAM,WAAW;IACtB,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;AAMA,MAAM,gBAA8C,CAAC,EAAE,QAAQ,EAAE;IAC/D,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAiB,EAAE;IAEvD,MAAM,YAAY,CAAC,SAAiB,MAAoC;QACtE,MAAM,KAAK,OAAO,UAAU;QAC5B,UAAU,CAAA,OAAQ;mBAAI;gBAAM;oBAAE;oBAAI;oBAAS;oBAAM;gBAAS;aAAE;IAC9D;IAEA,MAAM,cAAc,CAAC,SAAiB;QACpC,UAAU,SAAS,WAAW;IAChC;IAEA,MAAM,YAAY,CAAC,SAAiB;QAClC,UAAU,SAAS,SAAS;IAC9B;IAEA,MAAM,WAAW,CAAC,SAAiB;QACjC,UAAU,SAAS,QAAQ;IAC7B;IAEA,MAAM,cAAc,CAAC;QACnB,UAAU,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,QAAS,MAAM,EAAE,KAAK;IACtD;IAEA,MAAM,QAAQ;QACZ;QACA;QACA;QACA;IACF;IAEA,qBACE,8OAAC,aAAa,QAAQ;QAAC,OAAO;;YAC3B;YACA,OAAO,GAAG,CAAC,CAAA,sBACV,8OAAC,sIAAK;oBAEJ,SAAS,MAAM,OAAO;oBACtB,MAAM,MAAM,IAAI;oBAChB,SAAS,IAAM,YAAY,MAAM,EAAE;oBACnC,UAAU,MAAM,QAAQ;mBAJnB,MAAM,EAAE;;;;;;;;;;;AASvB;uCAEe"}},
    {"offset": {"line": 237, "column": 0}, "map": {"version":3,"sources":["file:///E:/robinson-family-tree/src/providers/UndoRedoProvider.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, createContext, useContext, ReactNode } from 'react';\r\n\r\ninterface Operation {\r\n  id: string;\r\n  type: 'addMember' | 'updateMember' | 'deleteMember' | 'addConnection' | 'updateConnection' | 'deleteConnection';\r\n  data: any;\r\n  timestamp: number;\r\n  inverse?: Partial<Operation>; // For undo operation, only needs type and data\r\n}\r\n\r\ninterface UndoRedoContextType {\r\n  operations: Operation[];\r\n  historyIndex: number;\r\n  canUndo: boolean;\r\n  canRedo: boolean;\r\n  addOperation: (operation: Omit<Operation, 'id' | 'timestamp'>) => void;\r\n  undo: () => void;\r\n  redo: () => void;\r\n  clearHistory: () => void;\r\n}\r\n\r\nconst UndoRedoContext = createContext<UndoRedoContextType | undefined>(undefined);\r\n\r\nexport const useUndoRedo = () => {\r\n  const context = useContext(UndoRedoContext);\r\n  if (!context) {\r\n    throw new Error('useUndoRedo must be used within an UndoRedoProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\ninterface UndoRedoProviderProps {\r\n  children: ReactNode;\r\n  maxHistory?: number;\r\n}\r\n\r\nconst UndoRedoProvider: React.FC<UndoRedoProviderProps> = ({ \r\n  children, \r\n  maxHistory = 50 \r\n}) => {\r\n  const [operations, setOperations] = useState<Operation[]>([]);\r\n  const [historyIndex, setHistoryIndex] = useState(-1);\r\n\r\n  const canUndo = historyIndex >= 0;\r\n  const canRedo = historyIndex < operations.length - 1;\r\n\r\n  const addOperation = (operation: Omit<Operation, 'id' | 'timestamp'>) => {\r\n    const newOperation: Operation = {\r\n      ...operation,\r\n      id: crypto.randomUUID(),\r\n      timestamp: Date.now()\r\n    };\r\n\r\n    // Truncate history if we're not at the end\r\n    const truncatedHistory = operations.slice(0, historyIndex + 1);\r\n    \r\n    // Add new operation\r\n    const newHistory = [...truncatedHistory, newOperation];\r\n    \r\n    // Limit history size\r\n    if (newHistory.length > maxHistory) {\r\n      newHistory.shift(); // Remove oldest operation\r\n      setHistoryIndex(maxHistory - 1);\r\n    } else {\r\n      setHistoryIndex(newHistory.length - 1);\r\n    }\r\n\r\n    setOperations(newHistory);\r\n  };\r\n\r\n  const undo = () => {\r\n    if (canUndo) {\r\n      setHistoryIndex(historyIndex - 1);\r\n      // The actual undo logic will be handled by the components\r\n      // that subscribe to the history index changes\r\n    }\r\n  };\r\n\r\n  const redo = () => {\r\n    if (canRedo) {\r\n      setHistoryIndex(historyIndex + 1);\r\n      // The actual redo logic will be handled by the components\r\n      // that subscribe to the history index changes\r\n    }\r\n  };\r\n\r\n  const clearHistory = () => {\r\n    setOperations([]);\r\n    setHistoryIndex(-1);\r\n  };\r\n\r\n  const value = {\r\n    operations,\r\n    historyIndex,\r\n    canUndo,\r\n    canRedo,\r\n    addOperation,\r\n    undo,\r\n    redo,\r\n    clearHistory\r\n  };\r\n\r\n  return (\r\n    <UndoRedoContext.Provider value={value}>\r\n      {children}\r\n    </UndoRedoContext.Provider>\r\n  );\r\n};\r\n\r\nexport default UndoRedoProvider;"],"names":[],"mappings":";;;;;;;AAEA;AAFA;;;AAuBA,MAAM,gCAAkB,IAAA,sNAAa,EAAkC;AAEhE,MAAM,cAAc;IACzB,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;AAOA,MAAM,mBAAoD,CAAC,EACzD,QAAQ,EACR,aAAa,EAAE,EAChB;IACC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAc,EAAE;IAC5D,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC,CAAC;IAElD,MAAM,UAAU,gBAAgB;IAChC,MAAM,UAAU,eAAe,WAAW,MAAM,GAAG;IAEnD,MAAM,eAAe,CAAC;QACpB,MAAM,eAA0B;YAC9B,GAAG,SAAS;YACZ,IAAI,OAAO,UAAU;YACrB,WAAW,KAAK,GAAG;QACrB;QAEA,2CAA2C;QAC3C,MAAM,mBAAmB,WAAW,KAAK,CAAC,GAAG,eAAe;QAE5D,oBAAoB;QACpB,MAAM,aAAa;eAAI;YAAkB;SAAa;QAEtD,qBAAqB;QACrB,IAAI,WAAW,MAAM,GAAG,YAAY;YAClC,WAAW,KAAK,IAAI,0BAA0B;YAC9C,gBAAgB,aAAa;QAC/B,OAAO;YACL,gBAAgB,WAAW,MAAM,GAAG;QACtC;QAEA,cAAc;IAChB;IAEA,MAAM,OAAO;QACX,IAAI,SAAS;YACX,gBAAgB,eAAe;QAC/B,0DAA0D;QAC1D,8CAA8C;QAChD;IACF;IAEA,MAAM,OAAO;QACX,IAAI,SAAS;YACX,gBAAgB,eAAe;QAC/B,0DAA0D;QAC1D,8CAA8C;QAChD;IACF;IAEA,MAAM,eAAe;QACnB,cAAc,EAAE;QAChB,gBAAgB,CAAC;IACnB;IAEA,MAAM,QAAQ;QACZ;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACF;IAEA,qBACE,8OAAC,gBAAgB,QAAQ;QAAC,OAAO;kBAC9B;;;;;;AAGP;uCAEe"}}]
}