{"version":3,"sources":["../../../../node_modules/next/src/client/components/router-reducer/router-reducer-types.ts","../../../../node_modules/%40swc/helpers/cjs/_interop_require_wildcard.cjs","../../../../node_modules/next/src/shared/lib/is-thenable.ts","../../../../node_modules/next/src/client/components/use-action-queue.ts","../../../../node_modules/next/src/client/app-call-server.ts","../../../../node_modules/next/src/client/app-find-source-map-url.ts","../../../../node_modules/next/src/build/webpack/loaders/next-flight-loader/action-client-wrapper.ts","../../../../App.tsx","../../../../app/data%3A09236a%20%3Ctext/javascript%3E","../../../../app/data%3A0a1818%20%3Ctext/javascript%3E","../../../../app/data%3A8f57ed%20%3Ctext/javascript%3E","../../../../app/data%3A0f3d4a%20%3Ctext/javascript%3E","../../../../app/data%3Aeedb54%20%3Ctext/javascript%3E","../../../../node_modules/%40tanstack/query-core/build/modern/queryObserver.js","../../../../node_modules/%40tanstack/react-query/build/modern/QueryErrorResetBoundary.js","../../../../node_modules/%40tanstack/react-query/build/modern/errorBoundaryUtils.js","../../../../node_modules/%40tanstack/react-query/build/modern/IsRestoringProvider.js","../../../../node_modules/%40tanstack/react-query/build/modern/suspense.js","../../../../node_modules/%40tanstack/react-query/build/modern/useBaseQuery.js","../../../../node_modules/%40tanstack/react-query/build/modern/useQuery.js","../../../../node_modules/%40tanstack/query-core/build/modern/mutationObserver.js","../../../../node_modules/%40tanstack/react-query/build/modern/useMutation.js","../../../../app/data%3A254741%20%3Ctext/javascript%3E","../../../../locales.ts","../../../../views/SettingsView.tsx","../../../../services/relationshipService.ts","../../../../components/Timeline.tsx","../../../../services/familyService.ts","../../../../views/DirectoryView.tsx","../../../../components/Navbar.tsx","../../../../components/EditMemberModal.tsx","../../../../components/EditConnectionModal.tsx","../../../../services/dbService.ts","../../../../components/ProfileSidebar.tsx","../../../../views/TreeView.tsx"],"sourcesContent":["import type { CacheNode } from '../../../shared/lib/app-router-types'\nimport type {\n  FlightRouterState,\n  FlightSegmentPath,\n} from '../../../shared/lib/app-router-types'\nimport type { NavigationSeed } from '../segment-cache/navigation'\nimport type { FetchServerResponseResult } from './fetch-server-response'\n\nexport const ACTION_REFRESH = 'refresh'\nexport const ACTION_NAVIGATE = 'navigate'\nexport const ACTION_RESTORE = 'restore'\nexport const ACTION_SERVER_PATCH = 'server-patch'\nexport const ACTION_HMR_REFRESH = 'hmr-refresh'\nexport const ACTION_SERVER_ACTION = 'server-action'\n\nexport type RouterChangeByServerResponse = ({\n  navigatedAt,\n  previousTree,\n  serverResponse,\n}: {\n  navigatedAt: number\n  previousTree: FlightRouterState\n  serverResponse: FetchServerResponseResult\n}) => void\n\nexport interface Mutable {\n  mpaNavigation?: boolean\n  patchedTree?: FlightRouterState\n  renderedSearch?: string\n  canonicalUrl?: string\n  scrollableSegments?: FlightSegmentPath[]\n  pendingPush?: boolean\n  cache?: CacheNode\n  hashFragment?: string\n  shouldScroll?: boolean\n  preserveCustomHistoryState?: boolean\n  onlyHashChange?: boolean\n  collectedDebugInfo?: Array<unknown>\n}\n\nexport interface ServerActionMutable extends Mutable {\n  inFlightServerAction?: Promise<any> | null\n}\n\n/**\n * Refresh triggers a refresh of the full page data.\n * - fetches the Flight data and fills rsc at the root of the cache.\n * - The router state is updated at the root.\n */\nexport interface RefreshAction {\n  type: typeof ACTION_REFRESH\n}\n\nexport interface HmrRefreshAction {\n  type: typeof ACTION_HMR_REFRESH\n}\n\nexport type ServerActionDispatcher = (\n  args: Omit<\n    ServerActionAction,\n    'type' | 'mutable' | 'navigate' | 'changeByServerResponse' | 'cache'\n  >\n) => void\n\nexport interface ServerActionAction {\n  type: typeof ACTION_SERVER_ACTION\n  actionId: string\n  actionArgs: any[]\n  resolve: (value: any) => void\n  reject: (reason?: any) => void\n  didRevalidate?: boolean\n}\n\n/**\n * Navigate triggers a navigation to the provided url. It supports two types: `push` and `replace`.\n *\n * `navigateType`:\n * - `push` - pushes a new history entry in the browser history\n * - `replace` - replaces the current history entry in the browser history\n *\n * Navigate has multiple cache heuristics:\n * - page was prefetched\n *  - Apply router state tree from prefetch\n *  - Apply Flight data from prefetch to the cache\n *  - If Flight data is a string, it's a redirect and the state is updated to trigger a redirect\n *  - Check if hard navigation is needed\n *    - Hard navigation happens when a dynamic parameter below the common layout changed\n *    - When hard navigation is needed the cache is invalidated below the flightSegmentPath\n *    - The missing cache nodes of the page will be fetched in layout-router and trigger the SERVER_PATCH action\n *  - If hard navigation is not needed\n *    - The cache is reused\n *    - If any cache nodes are missing they'll be fetched in layout-router and trigger the SERVER_PATCH action\n * - page was not prefetched\n *  - The navigate was called from `next/router` (`router.push()` / `router.replace()`) / `next/link` without prefetched data available (e.g. the prefetch didn't come back from the server before clicking the link)\n *    - Flight data is fetched in the reducer (suspends the reducer)\n *    - Router state tree is created based on Flight data\n *    - Cache is filled based on the Flight data\n *\n * Above steps explain 3 cases:\n * - `soft` - Reuses the existing cache and fetches missing nodes in layout-router.\n * - `hard` - Creates a new cache where cache nodes are removed below the common layout and fetches missing nodes in layout-router.\n * - `optimistic` (explicit no prefetch) - Creates a new cache and kicks off the data fetch in the reducer. The data fetch is awaited in the layout-router.\n */\nexport interface NavigateAction {\n  type: typeof ACTION_NAVIGATE\n  url: URL\n  isExternalUrl: boolean\n  locationSearch: Location['search']\n  navigateType: 'push' | 'replace'\n  shouldScroll: boolean\n}\n\n/**\n * Restore applies the provided router state.\n * - Used for `popstate` (back/forward navigation) where a known router state has to be applied.\n * - Also used when syncing the router state with `pushState`/`replaceState` calls.\n * - Router state is applied as-is from the history state, if available.\n * - If the history state does not contain the router state, the existing router state is used.\n * - If any cache node is missing it will be fetched in layout-router during rendering and the server-patch case.\n * - If existing cache nodes match these are used.\n */\nexport interface RestoreAction {\n  type: typeof ACTION_RESTORE\n  url: URL\n  historyState: AppHistoryState | undefined\n}\n\nexport type AppHistoryState = {\n  tree: FlightRouterState\n  renderedSearch: string\n}\n\n/**\n * Server-patch applies the provided Flight data to the cache and router tree.\n */\nexport interface ServerPatchAction {\n  type: typeof ACTION_SERVER_PATCH\n  previousTree: FlightRouterState\n  url: URL\n  nextUrl: string | null\n  seed: NavigationSeed | null\n  mpa: boolean\n}\n\n/**\n * PrefetchKind defines the type of prefetching that should be done.\n * - `auto` - if the page is dynamic, prefetch the page data partially, if static prefetch the page data fully.\n * - `full` - prefetch the page data fully.\n */\n\nexport enum PrefetchKind {\n  AUTO = 'auto',\n  FULL = 'full',\n}\n\n/**\n * Prefetch adds the provided FlightData to the prefetch cache\n * - Creates the router state tree based on the patch in FlightData\n * - Adds the FlightData to the prefetch cache\n * - In ACTION_NAVIGATE the prefetch cache is checked and the router state tree and FlightData are applied.\n */\n\nexport interface PushRef {\n  /**\n   * If the app-router should push a new history entry in app-router's useEffect()\n   */\n  pendingPush: boolean\n  /**\n   * Multi-page navigation through location.href.\n   */\n  mpaNavigation: boolean\n  /**\n   * Skip applying the router state to the browser history state.\n   */\n  preserveCustomHistoryState: boolean\n}\n\nexport type FocusAndScrollRef = {\n  /**\n   * If focus and scroll should be set in the layout-router's useEffect()\n   */\n  apply: boolean\n  /**\n   * The hash fragment that should be scrolled to.\n   */\n  hashFragment: string | null\n  /**\n   * The paths of the segments that should be focused.\n   */\n  segmentPaths: FlightSegmentPath[]\n  /**\n   * If only the URLs hash fragment changed\n   */\n  onlyHashChange: boolean\n}\n\n/**\n * Handles keeping the state of app-router.\n */\nexport type AppRouterState = {\n  /**\n   * The router state, this is written into the history state in app-router using replaceState/pushState.\n   * - Has to be serializable as it is written into the history state.\n   * - Holds which segments and parallel routes are shown on the screen.\n   */\n  tree: FlightRouterState\n  /**\n   * The cache holds React nodes for every segment that is shown on screen as well as previously shown segments.\n   * It also holds in-progress data requests.\n   */\n  cache: CacheNode\n  /**\n   * Decides if the update should create a new history entry and if the navigation has to trigger a browser navigation.\n   */\n  pushRef: PushRef\n  /**\n   * Decides if the update should apply scroll and focus management.\n   */\n  focusAndScrollRef: FocusAndScrollRef\n  /**\n   * The canonical url that is pushed/replaced.\n   * - This is the url you see in the browser.\n   */\n  canonicalUrl: string\n  renderedSearch: string\n  /**\n   * The underlying \"url\" representing the UI state, which is used for intercepting routes.\n   */\n  nextUrl: string | null\n\n  /**\n   * The previous next-url that was used previous to a dynamic navigation.\n   */\n  previousNextUrl: string | null\n\n  debugInfo: Array<unknown> | null\n}\n\nexport type ReadonlyReducerState = Readonly<AppRouterState>\nexport type ReducerState =\n  | (Promise<AppRouterState> & { _debugInfo?: Array<unknown> })\n  | AppRouterState\nexport type ReducerActions = Readonly<\n  | RefreshAction\n  | NavigateAction\n  | RestoreAction\n  | ServerPatchAction\n  | HmrRefreshAction\n  | ServerActionAction\n>\n","\"use strict\";\n\nfunction _getRequireWildcardCache(nodeInterop) {\n    if (typeof WeakMap !== \"function\") return null;\n\n    var cacheBabelInterop = new WeakMap();\n    var cacheNodeInterop = new WeakMap();\n\n    return (_getRequireWildcardCache = function(nodeInterop) {\n        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n    })(nodeInterop);\n}\nfunction _interop_require_wildcard(obj, nodeInterop) {\n    if (!nodeInterop && obj && obj.__esModule) return obj;\n    if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") return { default: obj };\n\n    var cache = _getRequireWildcardCache(nodeInterop);\n\n    if (cache && cache.has(obj)) return cache.get(obj);\n\n    var newObj = { __proto__: null };\n    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n    for (var key in obj) {\n        if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n            if (desc && (desc.get || desc.set)) Object.defineProperty(newObj, key, desc);\n            else newObj[key] = obj[key];\n        }\n    }\n\n    newObj.default = obj;\n\n    if (cache) cache.set(obj, newObj);\n\n    return newObj;\n}\nexports._ = _interop_require_wildcard;\n","/**\n * Check to see if a value is Thenable.\n *\n * @param promise the maybe-thenable value\n * @returns true if the value is thenable\n */\nexport function isThenable<T = unknown>(\n  promise: Promise<T> | T\n): promise is Promise<T> {\n  return (\n    promise !== null &&\n    typeof promise === 'object' &&\n    'then' in promise &&\n    typeof promise.then === 'function'\n  )\n}\n","import type { Dispatch } from 'react'\nimport React, { use, useMemo } from 'react'\nimport { isThenable } from '../../shared/lib/is-thenable'\nimport type { AppRouterActionQueue } from './app-router-instance'\nimport type {\n  AppRouterState,\n  ReducerActions,\n  ReducerState,\n} from './router-reducer/router-reducer-types'\n\n// The app router state lives outside of React, so we can import the dispatch\n// method directly wherever we need it, rather than passing it around via props\n// or context.\nlet dispatch: Dispatch<ReducerActions> | null = null\n\nexport function dispatchAppRouterAction(action: ReducerActions) {\n  if (dispatch === null) {\n    throw new Error(\n      'Internal Next.js error: Router action dispatched before initialization.'\n    )\n  }\n  dispatch(action)\n}\n\nconst __DEV__ = process.env.NODE_ENV !== 'production'\nconst promisesWithDebugInfo: WeakMap<\n  Promise<AppRouterState>,\n  Promise<AppRouterState> & { _debugInfo?: Array<unknown> }\n> = __DEV__ ? new WeakMap() : (null as any)\n\nexport function useActionQueue(\n  actionQueue: AppRouterActionQueue\n): AppRouterState {\n  const [state, setState] = React.useState<ReducerState>(actionQueue.state)\n\n  // Because of a known issue that requires to decode Flight streams inside the\n  // render phase, we have to be a bit clever and assign the dispatch method to\n  // a module-level variable upon initialization. The useState hook in this\n  // module only exists to synchronize state that lives outside of React.\n  // Ideally, what we'd do instead is pass the state as a prop to root.render;\n  // this is conceptually how we're modeling the app router state, despite the\n  // weird implementation details.\n  if (process.env.NODE_ENV !== 'production') {\n    const { useAppDevRenderingIndicator } =\n      require('../../next-devtools/userspace/use-app-dev-rendering-indicator') as typeof import('../../next-devtools/userspace/use-app-dev-rendering-indicator')\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    const appDevRenderingIndicator = useAppDevRenderingIndicator()\n\n    dispatch = (action: ReducerActions) => {\n      appDevRenderingIndicator(() => {\n        actionQueue.dispatch(action, setState)\n      })\n    }\n  } else {\n    dispatch = (action: ReducerActions) =>\n      actionQueue.dispatch(action, setState)\n  }\n\n  // When navigating to a non-prefetched route, then App Router state will be\n  // blocked until the server responds. We need to transfer the `_debugInfo`\n  // from the underlying Flight response onto the top-level promise that is\n  // passed to React (via `use`) so that the latency is accurately represented\n  // in the React DevTools.\n  const stateWithDebugInfo = useMemo(() => {\n    if (!__DEV__) {\n      return state\n    }\n\n    if (isThenable(state)) {\n      // useMemo can't be used to cache a Promise since the memoized value is thrown\n      // away when we suspend. So we use a WeakMap to cache the Promise with debug info.\n      let promiseWithDebugInfo = promisesWithDebugInfo.get(state)\n      if (promiseWithDebugInfo === undefined) {\n        const debugInfo: Array<unknown> = []\n        promiseWithDebugInfo = Promise.resolve(state).then((asyncState) => {\n          if (asyncState.debugInfo !== null) {\n            debugInfo.push(...asyncState.debugInfo)\n          }\n          return asyncState\n        }) as Promise<AppRouterState> & { _debugInfo?: Array<unknown> }\n        promiseWithDebugInfo._debugInfo = debugInfo\n\n        promisesWithDebugInfo.set(state, promiseWithDebugInfo)\n      }\n\n      return promiseWithDebugInfo\n    }\n    return state\n  }, [state])\n\n  return isThenable(stateWithDebugInfo)\n    ? use(stateWithDebugInfo)\n    : stateWithDebugInfo\n}\n","import { startTransition } from 'react'\nimport { ACTION_SERVER_ACTION } from './components/router-reducer/router-reducer-types'\nimport { dispatchAppRouterAction } from './components/use-action-queue'\n\nexport async function callServer(actionId: string, actionArgs: any[]) {\n  return new Promise((resolve, reject) => {\n    startTransition(() => {\n      dispatchAppRouterAction({\n        type: ACTION_SERVER_ACTION,\n        actionId,\n        actionArgs,\n        resolve,\n        reject,\n      })\n    })\n  })\n}\n","const basePath = process.env.__NEXT_ROUTER_BASEPATH || ''\nconst pathname = `${basePath}/__nextjs_source-map`\n\nexport const findSourceMapURL =\n  process.env.NODE_ENV === 'development'\n    ? function findSourceMapURL(filename: string): string | null {\n        if (filename === '') {\n          return null\n        }\n\n        if (\n          filename.startsWith(document.location.origin) &&\n          filename.includes('/_next/static')\n        ) {\n          // This is a request for a client chunk. This can only happen when\n          // using Turbopack. In this case, since we control how those source\n          // maps are generated, we can safely assume that the sourceMappingURL\n          // is relative to the filename, with an added `.map` extension. The\n          // browser can just request this file, and it gets served through the\n          // normal dev server, without the need to route this through\n          // the `/__nextjs_source-map` dev middleware.\n          return `${filename}.map`\n        }\n\n        const url = new URL(pathname, document.location.origin)\n        url.searchParams.set('filename', filename)\n\n        return url.href\n      }\n    : undefined\n","// This file must be bundled in the app's client layer, it shouldn't be directly\n// imported by the server.\n\nexport { callServer } from 'next/dist/client/app-call-server'\nexport { findSourceMapURL } from 'next/dist/client/app-find-source-map-url'\n\n// A noop wrapper to let the Flight client create the server reference.\n// See also: https://github.com/facebook/react/pull/26632\n// eslint-disable-next-line import/no-extraneous-dependencies\nexport { createServerReference } from 'react-server-dom-webpack/client'\n","\"use client\";\n\nimport React, { useState, useEffect } from 'react';\nimport { ViewMode, FamilyMember, Connection } from './types';\nimport { dbService } from './services/dbService';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { useToast } from './src/providers/ToastProvider';\nimport { useUndoRedo } from './src/providers/UndoRedoProvider';\nimport Navbar from './components/Navbar';\nimport TreeView from './views/TreeView';\nimport DirectoryView from './views/DirectoryView';\nimport SettingsView from './views/SettingsView';\nimport ProfileSidebar from './components/ProfileSidebar';\nimport Timeline from './components/Timeline';\nimport EditMemberModal from './components/EditMemberModal';\nimport EditConnectionModal from './components/EditConnectionModal';\n\nconst App: React.FC = () => {\n    const [currentView, setView] = useState<ViewMode>('tree');\n    const [selectedMemberId, setSelectedMemberId] = useState<string | null>(null);\n    const [showChineseNames, setShowChineseNames] = useState(false);\n    const queryClient = useQueryClient();\n    const toast = useToast();\n    const { addOperation, undo, redo, canUndo, canRedo } = useUndoRedo();\n\n    // Keyboard shortcuts for undo/redo\n    useEffect(() => {\n        const handleKeyDown = (e: KeyboardEvent) => {\n            if ((e.ctrlKey || e.metaKey) && e.key === 'z') {\n                e.preventDefault();\n                if (canUndo) {\n                    undo();\n                    toast.showInfo('Undo operation');\n                }\n            } else if ((e.ctrlKey || e.metaKey) && e.key === 'y') {\n                e.preventDefault();\n                if (canRedo) {\n                    redo();\n                    toast.showInfo('Redo operation');\n                }\n            }\n        };\n\n        window.addEventListener('keydown', handleKeyDown);\n        return () => window.removeEventListener('keydown', handleKeyDown);\n    }, [undo, redo, canUndo, canRedo, toast]);\n\n    // Modal State\n    const [isMemberModalOpen, setIsMemberModalOpen] = useState(false);\n    const [editingMember, setEditingMember] = useState<FamilyMember | null>(null);\n\n    // --- Data Queries ---\n\n    const { data: members = [], isLoading: membersLoading } = useQuery({\n        queryKey: ['members'],\n        queryFn: () => dbService.getMembers(),\n    });\n\n    const { data: connections = [], isLoading: connectionsLoading } = useQuery({\n        queryKey: ['connections'],\n        queryFn: () => dbService.getConnections(),\n    });\n\n    const loading = membersLoading || connectionsLoading;\n\n    // --- Mutations ---\n\n    const saveMemberMutation = useMutation({\n        mutationFn: (member: FamilyMember) => {\n            const existing = members.find(m => m.id === member.id);\n            if (existing) {\n                return dbService.updateMember(member);\n            } else {\n                return dbService.addMember(member);\n            }\n        },\n        onSuccess: (_, variables) => {\n            // Invalidate and refetch only the members query\n            queryClient.invalidateQueries({ queryKey: ['members'] });\n            // If member has connections, also refetch connections\n            queryClient.invalidateQueries({ queryKey: ['connections'] });\n            \n            // Show success toast\n            const existing = members.find(m => m.id === variables.id);\n            if (existing) {\n                toast.showSuccess('Member updated successfully');\n                \n                // Add update operation to history\n                addOperation({\n                    type: 'updateMember',\n                    data: {\n                        id: variables.id,\n                        oldData: existing,\n                        newData: variables\n                    },\n                    inverse: {\n                        type: 'updateMember',\n                        data: {\n                            id: variables.id,\n                            oldData: variables,\n                            newData: existing\n                        }\n                    }\n                });\n            } else {\n                toast.showSuccess('Member added successfully');\n                \n                // Add add operation to history\n                addOperation({\n                    type: 'addMember',\n                    data: variables,\n                    inverse: {\n                        type: 'deleteMember',\n                        data: { id: variables.id }\n                    }\n                });\n            }\n        },\n        onError: () => {\n            toast.showError('Failed to save member');\n        },\n    });\n\n    const deleteMemberMutation = useMutation({\n        mutationFn: (id: string) => {\n            // Get the member data before deleting for undo operation\n            const memberToDelete = members.find(m => m.id === id);\n            if (memberToDelete) {\n                // Store member data in a closure for use in onSuccess\n                (deleteMemberMutation as any)._memberToDelete = memberToDelete;\n            }\n            return dbService.deleteMember(id);\n        },\n        onSuccess: (_, variables) => {\n            // Invalidate and refetch both queries\n            queryClient.invalidateQueries({ queryKey: ['members'] });\n            queryClient.invalidateQueries({ queryKey: ['connections'] });\n            \n            // Show success toast\n            toast.showSuccess('Member deleted successfully');\n            \n            // Add delete operation to history\n            const memberToDelete = (deleteMemberMutation as any)._memberToDelete;\n            if (memberToDelete) {\n                addOperation({\n                    type: 'deleteMember',\n                    data: { id: variables, memberData: memberToDelete },\n                    inverse: {\n                        type: 'addMember',\n                        data: memberToDelete\n                    }\n                });\n                // Clear the stored member data\n                (deleteMemberMutation as any)._memberToDelete = undefined;\n            }\n        },\n        onError: () => {\n            toast.showError('Failed to delete member');\n            // Clear any stored member data on error\n            (deleteMemberMutation as any)._memberToDelete = undefined;\n        },\n    });\n\n    const handleSelectMember = (id: string) => {\n        setSelectedMemberId(id);\n    };\n\n    const handleSaveMember = async (member: FamilyMember) => {\n        await saveMemberMutation.mutateAsync(member);\n        setIsMemberModalOpen(false);\n        setEditingMember(null);\n    };\n\n    const handleDeleteMember = async (id: string) => {\n        if (window.confirm(\"Are you sure you want to delete this member? This will also remove connected lines.\")) {\n            await deleteMemberMutation.mutateAsync(id);\n            if (selectedMemberId === id) setSelectedMemberId(null);\n        }\n    };\n\n    const handleEditMemberRequest = (member: FamilyMember) => {\n        setEditingMember(member);\n        setIsMemberModalOpen(true);\n    };\n\n    const handleDataChange = () => {\n        // Invalidate and refetch both queries\n        queryClient.invalidateQueries({ queryKey: ['members'] });\n        queryClient.invalidateQueries({ queryKey: ['connections'] });\n    };\n\n    if (loading) {\n        return (\n            <div className=\"flex h-screen items-center justify-center bg-background-light dark:bg-background-dark text-primary\">\n                <span className=\"material-symbols-outlined text-4xl animate-spin\">autorenew</span>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"flex flex-col h-screen w-full relative\">\n            <Navbar \n                currentView={currentView} \n                setView={setView} \n                showChinese={showChineseNames}\n                setShowChinese={setShowChineseNames}\n            />\n            \n            <main className=\"flex-1 relative flex flex-col h-full overflow-hidden\">\n                {currentView === 'tree' && (\n                    <TreeView \n                        selectedId={selectedMemberId} \n                        onSelect={handleSelectMember} \n                        showChinese={showChineseNames}\n                        members={members}\n                        connections={connections}\n                        onDataChange={handleDataChange}\n                        onEditMember={handleEditMemberRequest}\n                    />\n                )}\n                \n                {currentView === 'directory' && (\n                    <DirectoryView \n                        onSelect={handleSelectMember} \n                        showChinese={showChineseNames}\n                        members={members}\n                    />\n                )}\n\n                {currentView === 'settings' && (\n                    <SettingsView />\n                )}\n            </main>\n\n            {/* Global Components */}\n            {selectedMemberId && (\n                <ProfileSidebar \n                    member={members.find(m => m.id === selectedMemberId) || null} \n                    onClose={() => setSelectedMemberId(null)}\n                    onSelectMember={handleSelectMember}\n                    showChinese={showChineseNames}\n                    onEdit={() => {\n                        const m = members.find(x => x.id === selectedMemberId);\n                        if (m) handleEditMemberRequest(m);\n                    }}\n                    onDelete={() => handleDeleteMember(selectedMemberId)}\n                    // Pass full data sets to sidebar for relationship calculation\n                    members={members}\n                    connections={connections}\n                />\n            )}\n\n            {currentView === 'tree' && <Timeline />}\n\n            {/* Modals placed at App level ensures they work from Sidebar OR Tree */}\n            <EditMemberModal \n                isOpen={isMemberModalOpen}\n                onClose={() => setIsMemberModalOpen(false)}\n                onSave={handleSaveMember}\n                member={editingMember}\n                lang={showChineseNames ? 'zh' : 'en'}\n            />\n        </div>\n    );\n};\n\nexport default App;\n","/* __next_internal_action_entry_do_not_use__ [{\"4074863e5d11f12596259c64117bb58347e8a88a02\":\"deleteMemberAction\"},\"app/actions.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_2=/*#__PURE__*/createServerReference(\"4074863e5d11f12596259c64117bb58347e8a88a02\",callServer,void 0,findSourceMapURL,\"deleteMemberAction\");export{$$RSC_SERVER_ACTION_2 as deleteMemberAction};","/* __next_internal_action_entry_do_not_use__ [{\"003761513aa52799012788a487429b5d1b4d7e0a29\":\"getConnectionsAction\"},\"app/actions.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_4=/*#__PURE__*/createServerReference(\"003761513aa52799012788a487429b5d1b4d7e0a29\",callServer,void 0,findSourceMapURL,\"getConnectionsAction\");export{$$RSC_SERVER_ACTION_4 as getConnectionsAction};","/* __next_internal_action_entry_do_not_use__ [{\"40ac8f13597e27c417bef8e29ed00511d1c0e50956\":\"saveConnectionAction\"},\"app/actions.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_5=/*#__PURE__*/createServerReference(\"40ac8f13597e27c417bef8e29ed00511d1c0e50956\",callServer,void 0,findSourceMapURL,\"saveConnectionAction\");export{$$RSC_SERVER_ACTION_5 as saveConnectionAction};","/* __next_internal_action_entry_do_not_use__ [{\"40c203df7974a181bbbf52d3fc46c31cd6001edfeb\":\"deleteConnectionAction\"},\"app/actions.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_6=/*#__PURE__*/createServerReference(\"40c203df7974a181bbbf52d3fc46c31cd6001edfeb\",callServer,void 0,findSourceMapURL,\"deleteConnectionAction\");export{$$RSC_SERVER_ACTION_6 as deleteConnectionAction};","/* __next_internal_action_entry_do_not_use__ [{\"00426a7e4cadf7afffdf1c9766764168d718302b92\":\"getMembersAction\"},\"app/actions.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_0=/*#__PURE__*/createServerReference(\"00426a7e4cadf7afffdf1c9766764168d718302b92\",callServer,void 0,findSourceMapURL,\"getMembersAction\");export{$$RSC_SERVER_ACTION_0 as getMembersAction};","// src/queryObserver.ts\nimport { focusManager } from \"./focusManager.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { fetchState } from \"./query.js\";\nimport { Subscribable } from \"./subscribable.js\";\nimport { pendingThenable } from \"./thenable.js\";\nimport {\n  isServer,\n  isValidTimeout,\n  noop,\n  replaceData,\n  resolveEnabled,\n  resolveStaleTime,\n  shallowEqualObjects,\n  timeUntilStale\n} from \"./utils.js\";\nimport { timeoutManager } from \"./timeoutManager.js\";\nvar QueryObserver = class extends Subscribable {\n  constructor(client, options) {\n    super();\n    this.options = options;\n    this.#client = client;\n    this.#selectError = null;\n    this.#currentThenable = pendingThenable();\n    this.bindMethods();\n    this.setOptions(options);\n  }\n  #client;\n  #currentQuery = void 0;\n  #currentQueryInitialState = void 0;\n  #currentResult = void 0;\n  #currentResultState;\n  #currentResultOptions;\n  #currentThenable;\n  #selectError;\n  #selectFn;\n  #selectResult;\n  // This property keeps track of the last query with defined data.\n  // It will be used to pass the previous data and query to the placeholder function between renders.\n  #lastQueryWithDefinedData;\n  #staleTimeoutId;\n  #refetchIntervalId;\n  #currentRefetchInterval;\n  #trackedProps = /* @__PURE__ */ new Set();\n  bindMethods() {\n    this.refetch = this.refetch.bind(this);\n  }\n  onSubscribe() {\n    if (this.listeners.size === 1) {\n      this.#currentQuery.addObserver(this);\n      if (shouldFetchOnMount(this.#currentQuery, this.options)) {\n        this.#executeFetch();\n      } else {\n        this.updateResult();\n      }\n      this.#updateTimers();\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.destroy();\n    }\n  }\n  shouldFetchOnReconnect() {\n    return shouldFetchOn(\n      this.#currentQuery,\n      this.options,\n      this.options.refetchOnReconnect\n    );\n  }\n  shouldFetchOnWindowFocus() {\n    return shouldFetchOn(\n      this.#currentQuery,\n      this.options,\n      this.options.refetchOnWindowFocus\n    );\n  }\n  destroy() {\n    this.listeners = /* @__PURE__ */ new Set();\n    this.#clearStaleTimeout();\n    this.#clearRefetchInterval();\n    this.#currentQuery.removeObserver(this);\n  }\n  setOptions(options) {\n    const prevOptions = this.options;\n    const prevQuery = this.#currentQuery;\n    this.options = this.#client.defaultQueryOptions(options);\n    if (this.options.enabled !== void 0 && typeof this.options.enabled !== \"boolean\" && typeof this.options.enabled !== \"function\" && typeof resolveEnabled(this.options.enabled, this.#currentQuery) !== \"boolean\") {\n      throw new Error(\n        \"Expected enabled to be a boolean or a callback that returns a boolean\"\n      );\n    }\n    this.#updateQuery();\n    this.#currentQuery.setOptions(this.options);\n    if (prevOptions._defaulted && !shallowEqualObjects(this.options, prevOptions)) {\n      this.#client.getQueryCache().notify({\n        type: \"observerOptionsUpdated\",\n        query: this.#currentQuery,\n        observer: this\n      });\n    }\n    const mounted = this.hasListeners();\n    if (mounted && shouldFetchOptionally(\n      this.#currentQuery,\n      prevQuery,\n      this.options,\n      prevOptions\n    )) {\n      this.#executeFetch();\n    }\n    this.updateResult();\n    if (mounted && (this.#currentQuery !== prevQuery || resolveEnabled(this.options.enabled, this.#currentQuery) !== resolveEnabled(prevOptions.enabled, this.#currentQuery) || resolveStaleTime(this.options.staleTime, this.#currentQuery) !== resolveStaleTime(prevOptions.staleTime, this.#currentQuery))) {\n      this.#updateStaleTimeout();\n    }\n    const nextRefetchInterval = this.#computeRefetchInterval();\n    if (mounted && (this.#currentQuery !== prevQuery || resolveEnabled(this.options.enabled, this.#currentQuery) !== resolveEnabled(prevOptions.enabled, this.#currentQuery) || nextRefetchInterval !== this.#currentRefetchInterval)) {\n      this.#updateRefetchInterval(nextRefetchInterval);\n    }\n  }\n  getOptimisticResult(options) {\n    const query = this.#client.getQueryCache().build(this.#client, options);\n    const result = this.createResult(query, options);\n    if (shouldAssignObserverCurrentProperties(this, result)) {\n      this.#currentResult = result;\n      this.#currentResultOptions = this.options;\n      this.#currentResultState = this.#currentQuery.state;\n    }\n    return result;\n  }\n  getCurrentResult() {\n    return this.#currentResult;\n  }\n  trackResult(result, onPropTracked) {\n    return new Proxy(result, {\n      get: (target, key) => {\n        this.trackProp(key);\n        onPropTracked?.(key);\n        if (key === \"promise\") {\n          this.trackProp(\"data\");\n          if (!this.options.experimental_prefetchInRender && this.#currentThenable.status === \"pending\") {\n            this.#currentThenable.reject(\n              new Error(\n                \"experimental_prefetchInRender feature flag is not enabled\"\n              )\n            );\n          }\n        }\n        return Reflect.get(target, key);\n      }\n    });\n  }\n  trackProp(key) {\n    this.#trackedProps.add(key);\n  }\n  getCurrentQuery() {\n    return this.#currentQuery;\n  }\n  refetch({ ...options } = {}) {\n    return this.fetch({\n      ...options\n    });\n  }\n  fetchOptimistic(options) {\n    const defaultedOptions = this.#client.defaultQueryOptions(options);\n    const query = this.#client.getQueryCache().build(this.#client, defaultedOptions);\n    return query.fetch().then(() => this.createResult(query, defaultedOptions));\n  }\n  fetch(fetchOptions) {\n    return this.#executeFetch({\n      ...fetchOptions,\n      cancelRefetch: fetchOptions.cancelRefetch ?? true\n    }).then(() => {\n      this.updateResult();\n      return this.#currentResult;\n    });\n  }\n  #executeFetch(fetchOptions) {\n    this.#updateQuery();\n    let promise = this.#currentQuery.fetch(\n      this.options,\n      fetchOptions\n    );\n    if (!fetchOptions?.throwOnError) {\n      promise = promise.catch(noop);\n    }\n    return promise;\n  }\n  #updateStaleTimeout() {\n    this.#clearStaleTimeout();\n    const staleTime = resolveStaleTime(\n      this.options.staleTime,\n      this.#currentQuery\n    );\n    if (isServer || this.#currentResult.isStale || !isValidTimeout(staleTime)) {\n      return;\n    }\n    const time = timeUntilStale(this.#currentResult.dataUpdatedAt, staleTime);\n    const timeout = time + 1;\n    this.#staleTimeoutId = timeoutManager.setTimeout(() => {\n      if (!this.#currentResult.isStale) {\n        this.updateResult();\n      }\n    }, timeout);\n  }\n  #computeRefetchInterval() {\n    return (typeof this.options.refetchInterval === \"function\" ? this.options.refetchInterval(this.#currentQuery) : this.options.refetchInterval) ?? false;\n  }\n  #updateRefetchInterval(nextInterval) {\n    this.#clearRefetchInterval();\n    this.#currentRefetchInterval = nextInterval;\n    if (isServer || resolveEnabled(this.options.enabled, this.#currentQuery) === false || !isValidTimeout(this.#currentRefetchInterval) || this.#currentRefetchInterval === 0) {\n      return;\n    }\n    this.#refetchIntervalId = timeoutManager.setInterval(() => {\n      if (this.options.refetchIntervalInBackground || focusManager.isFocused()) {\n        this.#executeFetch();\n      }\n    }, this.#currentRefetchInterval);\n  }\n  #updateTimers() {\n    this.#updateStaleTimeout();\n    this.#updateRefetchInterval(this.#computeRefetchInterval());\n  }\n  #clearStaleTimeout() {\n    if (this.#staleTimeoutId) {\n      timeoutManager.clearTimeout(this.#staleTimeoutId);\n      this.#staleTimeoutId = void 0;\n    }\n  }\n  #clearRefetchInterval() {\n    if (this.#refetchIntervalId) {\n      timeoutManager.clearInterval(this.#refetchIntervalId);\n      this.#refetchIntervalId = void 0;\n    }\n  }\n  createResult(query, options) {\n    const prevQuery = this.#currentQuery;\n    const prevOptions = this.options;\n    const prevResult = this.#currentResult;\n    const prevResultState = this.#currentResultState;\n    const prevResultOptions = this.#currentResultOptions;\n    const queryChange = query !== prevQuery;\n    const queryInitialState = queryChange ? query.state : this.#currentQueryInitialState;\n    const { state } = query;\n    let newState = { ...state };\n    let isPlaceholderData = false;\n    let data;\n    if (options._optimisticResults) {\n      const mounted = this.hasListeners();\n      const fetchOnMount = !mounted && shouldFetchOnMount(query, options);\n      const fetchOptionally = mounted && shouldFetchOptionally(query, prevQuery, options, prevOptions);\n      if (fetchOnMount || fetchOptionally) {\n        newState = {\n          ...newState,\n          ...fetchState(state.data, query.options)\n        };\n      }\n      if (options._optimisticResults === \"isRestoring\") {\n        newState.fetchStatus = \"idle\";\n      }\n    }\n    let { error, errorUpdatedAt, status } = newState;\n    data = newState.data;\n    let skipSelect = false;\n    if (options.placeholderData !== void 0 && data === void 0 && status === \"pending\") {\n      let placeholderData;\n      if (prevResult?.isPlaceholderData && options.placeholderData === prevResultOptions?.placeholderData) {\n        placeholderData = prevResult.data;\n        skipSelect = true;\n      } else {\n        placeholderData = typeof options.placeholderData === \"function\" ? options.placeholderData(\n          this.#lastQueryWithDefinedData?.state.data,\n          this.#lastQueryWithDefinedData\n        ) : options.placeholderData;\n      }\n      if (placeholderData !== void 0) {\n        status = \"success\";\n        data = replaceData(\n          prevResult?.data,\n          placeholderData,\n          options\n        );\n        isPlaceholderData = true;\n      }\n    }\n    if (options.select && data !== void 0 && !skipSelect) {\n      if (prevResult && data === prevResultState?.data && options.select === this.#selectFn) {\n        data = this.#selectResult;\n      } else {\n        try {\n          this.#selectFn = options.select;\n          data = options.select(data);\n          data = replaceData(prevResult?.data, data, options);\n          this.#selectResult = data;\n          this.#selectError = null;\n        } catch (selectError) {\n          this.#selectError = selectError;\n        }\n      }\n    }\n    if (this.#selectError) {\n      error = this.#selectError;\n      data = this.#selectResult;\n      errorUpdatedAt = Date.now();\n      status = \"error\";\n    }\n    const isFetching = newState.fetchStatus === \"fetching\";\n    const isPending = status === \"pending\";\n    const isError = status === \"error\";\n    const isLoading = isPending && isFetching;\n    const hasData = data !== void 0;\n    const result = {\n      status,\n      fetchStatus: newState.fetchStatus,\n      isPending,\n      isSuccess: status === \"success\",\n      isError,\n      isInitialLoading: isLoading,\n      isLoading,\n      data,\n      dataUpdatedAt: newState.dataUpdatedAt,\n      error,\n      errorUpdatedAt,\n      failureCount: newState.fetchFailureCount,\n      failureReason: newState.fetchFailureReason,\n      errorUpdateCount: newState.errorUpdateCount,\n      isFetched: newState.dataUpdateCount > 0 || newState.errorUpdateCount > 0,\n      isFetchedAfterMount: newState.dataUpdateCount > queryInitialState.dataUpdateCount || newState.errorUpdateCount > queryInitialState.errorUpdateCount,\n      isFetching,\n      isRefetching: isFetching && !isPending,\n      isLoadingError: isError && !hasData,\n      isPaused: newState.fetchStatus === \"paused\",\n      isPlaceholderData,\n      isRefetchError: isError && hasData,\n      isStale: isStale(query, options),\n      refetch: this.refetch,\n      promise: this.#currentThenable,\n      isEnabled: resolveEnabled(options.enabled, query) !== false\n    };\n    const nextResult = result;\n    if (this.options.experimental_prefetchInRender) {\n      const hasResultData = nextResult.data !== void 0;\n      const isErrorWithoutData = nextResult.status === \"error\" && !hasResultData;\n      const finalizeThenableIfPossible = (thenable) => {\n        if (isErrorWithoutData) {\n          thenable.reject(nextResult.error);\n        } else if (hasResultData) {\n          thenable.resolve(nextResult.data);\n        }\n      };\n      const recreateThenable = () => {\n        const pending = this.#currentThenable = nextResult.promise = pendingThenable();\n        finalizeThenableIfPossible(pending);\n      };\n      const prevThenable = this.#currentThenable;\n      switch (prevThenable.status) {\n        case \"pending\":\n          if (query.queryHash === prevQuery.queryHash) {\n            finalizeThenableIfPossible(prevThenable);\n          }\n          break;\n        case \"fulfilled\":\n          if (isErrorWithoutData || nextResult.data !== prevThenable.value) {\n            recreateThenable();\n          }\n          break;\n        case \"rejected\":\n          if (!isErrorWithoutData || nextResult.error !== prevThenable.reason) {\n            recreateThenable();\n          }\n          break;\n      }\n    }\n    return nextResult;\n  }\n  updateResult() {\n    const prevResult = this.#currentResult;\n    const nextResult = this.createResult(this.#currentQuery, this.options);\n    this.#currentResultState = this.#currentQuery.state;\n    this.#currentResultOptions = this.options;\n    if (this.#currentResultState.data !== void 0) {\n      this.#lastQueryWithDefinedData = this.#currentQuery;\n    }\n    if (shallowEqualObjects(nextResult, prevResult)) {\n      return;\n    }\n    this.#currentResult = nextResult;\n    const shouldNotifyListeners = () => {\n      if (!prevResult) {\n        return true;\n      }\n      const { notifyOnChangeProps } = this.options;\n      const notifyOnChangePropsValue = typeof notifyOnChangeProps === \"function\" ? notifyOnChangeProps() : notifyOnChangeProps;\n      if (notifyOnChangePropsValue === \"all\" || !notifyOnChangePropsValue && !this.#trackedProps.size) {\n        return true;\n      }\n      const includedProps = new Set(\n        notifyOnChangePropsValue ?? this.#trackedProps\n      );\n      if (this.options.throwOnError) {\n        includedProps.add(\"error\");\n      }\n      return Object.keys(this.#currentResult).some((key) => {\n        const typedKey = key;\n        const changed = this.#currentResult[typedKey] !== prevResult[typedKey];\n        return changed && includedProps.has(typedKey);\n      });\n    };\n    this.#notify({ listeners: shouldNotifyListeners() });\n  }\n  #updateQuery() {\n    const query = this.#client.getQueryCache().build(this.#client, this.options);\n    if (query === this.#currentQuery) {\n      return;\n    }\n    const prevQuery = this.#currentQuery;\n    this.#currentQuery = query;\n    this.#currentQueryInitialState = query.state;\n    if (this.hasListeners()) {\n      prevQuery?.removeObserver(this);\n      query.addObserver(this);\n    }\n  }\n  onQueryUpdate() {\n    this.updateResult();\n    if (this.hasListeners()) {\n      this.#updateTimers();\n    }\n  }\n  #notify(notifyOptions) {\n    notifyManager.batch(() => {\n      if (notifyOptions.listeners) {\n        this.listeners.forEach((listener) => {\n          listener(this.#currentResult);\n        });\n      }\n      this.#client.getQueryCache().notify({\n        query: this.#currentQuery,\n        type: \"observerResultsUpdated\"\n      });\n    });\n  }\n};\nfunction shouldLoadOnMount(query, options) {\n  return resolveEnabled(options.enabled, query) !== false && query.state.data === void 0 && !(query.state.status === \"error\" && options.retryOnMount === false);\n}\nfunction shouldFetchOnMount(query, options) {\n  return shouldLoadOnMount(query, options) || query.state.data !== void 0 && shouldFetchOn(query, options, options.refetchOnMount);\n}\nfunction shouldFetchOn(query, options, field) {\n  if (resolveEnabled(options.enabled, query) !== false && resolveStaleTime(options.staleTime, query) !== \"static\") {\n    const value = typeof field === \"function\" ? field(query) : field;\n    return value === \"always\" || value !== false && isStale(query, options);\n  }\n  return false;\n}\nfunction shouldFetchOptionally(query, prevQuery, options, prevOptions) {\n  return (query !== prevQuery || resolveEnabled(prevOptions.enabled, query) === false) && (!options.suspense || query.state.status !== \"error\") && isStale(query, options);\n}\nfunction isStale(query, options) {\n  return resolveEnabled(options.enabled, query) !== false && query.isStaleByTime(resolveStaleTime(options.staleTime, query));\n}\nfunction shouldAssignObserverCurrentProperties(observer, optimisticResult) {\n  if (!shallowEqualObjects(observer.getCurrentResult(), optimisticResult)) {\n    return true;\n  }\n  return false;\n}\nexport {\n  QueryObserver\n};\n//# sourceMappingURL=queryObserver.js.map","\"use client\";\n\n// src/QueryErrorResetBoundary.tsx\nimport * as React from \"react\";\nimport { jsx } from \"react/jsx-runtime\";\nfunction createValue() {\n  let isReset = false;\n  return {\n    clearReset: () => {\n      isReset = false;\n    },\n    reset: () => {\n      isReset = true;\n    },\n    isReset: () => {\n      return isReset;\n    }\n  };\n}\nvar QueryErrorResetBoundaryContext = React.createContext(createValue());\nvar useQueryErrorResetBoundary = () => React.useContext(QueryErrorResetBoundaryContext);\nvar QueryErrorResetBoundary = ({\n  children\n}) => {\n  const [value] = React.useState(() => createValue());\n  return /* @__PURE__ */ jsx(QueryErrorResetBoundaryContext.Provider, { value, children: typeof children === \"function\" ? children(value) : children });\n};\nexport {\n  QueryErrorResetBoundary,\n  useQueryErrorResetBoundary\n};\n//# sourceMappingURL=QueryErrorResetBoundary.js.map","\"use client\";\n\n// src/errorBoundaryUtils.ts\nimport * as React from \"react\";\nimport { shouldThrowError } from \"@tanstack/query-core\";\nvar ensurePreventErrorBoundaryRetry = (options, errorResetBoundary, query) => {\n  const throwOnError = query?.state.error && typeof options.throwOnError === \"function\" ? shouldThrowError(options.throwOnError, [query.state.error, query]) : options.throwOnError;\n  if (options.suspense || options.experimental_prefetchInRender || throwOnError) {\n    if (!errorResetBoundary.isReset()) {\n      options.retryOnMount = false;\n    }\n  }\n};\nvar useClearResetErrorBoundary = (errorResetBoundary) => {\n  React.useEffect(() => {\n    errorResetBoundary.clearReset();\n  }, [errorResetBoundary]);\n};\nvar getHasError = ({\n  result,\n  errorResetBoundary,\n  throwOnError,\n  query,\n  suspense\n}) => {\n  return result.isError && !errorResetBoundary.isReset() && !result.isFetching && query && (suspense && result.data === void 0 || shouldThrowError(throwOnError, [result.error, query]));\n};\nexport {\n  ensurePreventErrorBoundaryRetry,\n  getHasError,\n  useClearResetErrorBoundary\n};\n//# sourceMappingURL=errorBoundaryUtils.js.map","\"use client\";\n\n// src/IsRestoringProvider.ts\nimport * as React from \"react\";\nvar IsRestoringContext = React.createContext(false);\nvar useIsRestoring = () => React.useContext(IsRestoringContext);\nvar IsRestoringProvider = IsRestoringContext.Provider;\nexport {\n  IsRestoringProvider,\n  useIsRestoring\n};\n//# sourceMappingURL=IsRestoringProvider.js.map","// src/suspense.ts\nvar defaultThrowOnError = (_error, query) => query.state.data === void 0;\nvar ensureSuspenseTimers = (defaultedOptions) => {\n  if (defaultedOptions.suspense) {\n    const MIN_SUSPENSE_TIME_MS = 1e3;\n    const clamp = (value) => value === \"static\" ? value : Math.max(value ?? MIN_SUSPENSE_TIME_MS, MIN_SUSPENSE_TIME_MS);\n    const originalStaleTime = defaultedOptions.staleTime;\n    defaultedOptions.staleTime = typeof originalStaleTime === \"function\" ? (...args) => clamp(originalStaleTime(...args)) : clamp(originalStaleTime);\n    if (typeof defaultedOptions.gcTime === \"number\") {\n      defaultedOptions.gcTime = Math.max(\n        defaultedOptions.gcTime,\n        MIN_SUSPENSE_TIME_MS\n      );\n    }\n  }\n};\nvar willFetch = (result, isRestoring) => result.isLoading && result.isFetching && !isRestoring;\nvar shouldSuspend = (defaultedOptions, result) => defaultedOptions?.suspense && result.isPending;\nvar fetchOptimistic = (defaultedOptions, observer, errorResetBoundary) => observer.fetchOptimistic(defaultedOptions).catch(() => {\n  errorResetBoundary.clearReset();\n});\nexport {\n  defaultThrowOnError,\n  ensureSuspenseTimers,\n  fetchOptimistic,\n  shouldSuspend,\n  willFetch\n};\n//# sourceMappingURL=suspense.js.map","\"use client\";\n\n// src/useBaseQuery.ts\nimport * as React from \"react\";\nimport { isServer, noop, notifyManager } from \"@tanstack/query-core\";\nimport { useQueryClient } from \"./QueryClientProvider.js\";\nimport { useQueryErrorResetBoundary } from \"./QueryErrorResetBoundary.js\";\nimport {\n  ensurePreventErrorBoundaryRetry,\n  getHasError,\n  useClearResetErrorBoundary\n} from \"./errorBoundaryUtils.js\";\nimport { useIsRestoring } from \"./IsRestoringProvider.js\";\nimport {\n  ensureSuspenseTimers,\n  fetchOptimistic,\n  shouldSuspend,\n  willFetch\n} from \"./suspense.js\";\nfunction useBaseQuery(options, Observer, queryClient) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (typeof options !== \"object\" || Array.isArray(options)) {\n      throw new Error(\n        'Bad argument type. Starting with v5, only the \"Object\" form is allowed when calling query related functions. Please use the error stack to find the culprit call. More info here: https://tanstack.com/query/latest/docs/react/guides/migrating-to-v5#supports-a-single-signature-one-object'\n      );\n    }\n  }\n  const isRestoring = useIsRestoring();\n  const errorResetBoundary = useQueryErrorResetBoundary();\n  const client = useQueryClient(queryClient);\n  const defaultedOptions = client.defaultQueryOptions(options);\n  client.getDefaultOptions().queries?._experimental_beforeQuery?.(\n    defaultedOptions\n  );\n  const query = client.getQueryCache().get(defaultedOptions.queryHash);\n  if (process.env.NODE_ENV !== \"production\") {\n    if (!defaultedOptions.queryFn) {\n      console.error(\n        `[${defaultedOptions.queryHash}]: No queryFn was passed as an option, and no default queryFn was found. The queryFn parameter is only optional when using a default queryFn. More info here: https://tanstack.com/query/latest/docs/framework/react/guides/default-query-function`\n      );\n    }\n  }\n  defaultedOptions._optimisticResults = isRestoring ? \"isRestoring\" : \"optimistic\";\n  ensureSuspenseTimers(defaultedOptions);\n  ensurePreventErrorBoundaryRetry(defaultedOptions, errorResetBoundary, query);\n  useClearResetErrorBoundary(errorResetBoundary);\n  const isNewCacheEntry = !client.getQueryCache().get(defaultedOptions.queryHash);\n  const [observer] = React.useState(\n    () => new Observer(\n      client,\n      defaultedOptions\n    )\n  );\n  const result = observer.getOptimisticResult(defaultedOptions);\n  const shouldSubscribe = !isRestoring && options.subscribed !== false;\n  React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) => {\n        const unsubscribe = shouldSubscribe ? observer.subscribe(notifyManager.batchCalls(onStoreChange)) : noop;\n        observer.updateResult();\n        return unsubscribe;\n      },\n      [observer, shouldSubscribe]\n    ),\n    () => observer.getCurrentResult(),\n    () => observer.getCurrentResult()\n  );\n  React.useEffect(() => {\n    observer.setOptions(defaultedOptions);\n  }, [defaultedOptions, observer]);\n  if (shouldSuspend(defaultedOptions, result)) {\n    throw fetchOptimistic(defaultedOptions, observer, errorResetBoundary);\n  }\n  if (getHasError({\n    result,\n    errorResetBoundary,\n    throwOnError: defaultedOptions.throwOnError,\n    query,\n    suspense: defaultedOptions.suspense\n  })) {\n    throw result.error;\n  }\n  ;\n  client.getDefaultOptions().queries?._experimental_afterQuery?.(\n    defaultedOptions,\n    result\n  );\n  if (defaultedOptions.experimental_prefetchInRender && !isServer && willFetch(result, isRestoring)) {\n    const promise = isNewCacheEntry ? (\n      // Fetch immediately on render in order to ensure `.promise` is resolved even if the component is unmounted\n      fetchOptimistic(defaultedOptions, observer, errorResetBoundary)\n    ) : (\n      // subscribe to the \"cache promise\" so that we can finalize the currentThenable once data comes in\n      query?.promise\n    );\n    promise?.catch(noop).finally(() => {\n      observer.updateResult();\n    });\n  }\n  return !defaultedOptions.notifyOnChangeProps ? observer.trackResult(result) : result;\n}\nexport {\n  useBaseQuery\n};\n//# sourceMappingURL=useBaseQuery.js.map","\"use client\";\n\n// src/useQuery.ts\nimport { QueryObserver } from \"@tanstack/query-core\";\nimport { useBaseQuery } from \"./useBaseQuery.js\";\nfunction useQuery(options, queryClient) {\n  return useBaseQuery(options, QueryObserver, queryClient);\n}\nexport {\n  useQuery\n};\n//# sourceMappingURL=useQuery.js.map","// src/mutationObserver.ts\nimport { getDefaultState } from \"./mutation.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Subscribable } from \"./subscribable.js\";\nimport { hashKey, shallowEqualObjects } from \"./utils.js\";\nvar MutationObserver = class extends Subscribable {\n  #client;\n  #currentResult = void 0;\n  #currentMutation;\n  #mutateOptions;\n  constructor(client, options) {\n    super();\n    this.#client = client;\n    this.setOptions(options);\n    this.bindMethods();\n    this.#updateResult();\n  }\n  bindMethods() {\n    this.mutate = this.mutate.bind(this);\n    this.reset = this.reset.bind(this);\n  }\n  setOptions(options) {\n    const prevOptions = this.options;\n    this.options = this.#client.defaultMutationOptions(options);\n    if (!shallowEqualObjects(this.options, prevOptions)) {\n      this.#client.getMutationCache().notify({\n        type: \"observerOptionsUpdated\",\n        mutation: this.#currentMutation,\n        observer: this\n      });\n    }\n    if (prevOptions?.mutationKey && this.options.mutationKey && hashKey(prevOptions.mutationKey) !== hashKey(this.options.mutationKey)) {\n      this.reset();\n    } else if (this.#currentMutation?.state.status === \"pending\") {\n      this.#currentMutation.setOptions(this.options);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#currentMutation?.removeObserver(this);\n    }\n  }\n  onMutationUpdate(action) {\n    this.#updateResult();\n    this.#notify(action);\n  }\n  getCurrentResult() {\n    return this.#currentResult;\n  }\n  reset() {\n    this.#currentMutation?.removeObserver(this);\n    this.#currentMutation = void 0;\n    this.#updateResult();\n    this.#notify();\n  }\n  mutate(variables, options) {\n    this.#mutateOptions = options;\n    this.#currentMutation?.removeObserver(this);\n    this.#currentMutation = this.#client.getMutationCache().build(this.#client, this.options);\n    this.#currentMutation.addObserver(this);\n    return this.#currentMutation.execute(variables);\n  }\n  #updateResult() {\n    const state = this.#currentMutation?.state ?? getDefaultState();\n    this.#currentResult = {\n      ...state,\n      isPending: state.status === \"pending\",\n      isSuccess: state.status === \"success\",\n      isError: state.status === \"error\",\n      isIdle: state.status === \"idle\",\n      mutate: this.mutate,\n      reset: this.reset\n    };\n  }\n  #notify(action) {\n    notifyManager.batch(() => {\n      if (this.#mutateOptions && this.hasListeners()) {\n        const variables = this.#currentResult.variables;\n        const onMutateResult = this.#currentResult.context;\n        const context = {\n          client: this.#client,\n          meta: this.options.meta,\n          mutationKey: this.options.mutationKey\n        };\n        if (action?.type === \"success\") {\n          try {\n            this.#mutateOptions.onSuccess?.(\n              action.data,\n              variables,\n              onMutateResult,\n              context\n            );\n          } catch (e) {\n            void Promise.reject(e);\n          }\n          try {\n            this.#mutateOptions.onSettled?.(\n              action.data,\n              null,\n              variables,\n              onMutateResult,\n              context\n            );\n          } catch (e) {\n            void Promise.reject(e);\n          }\n        } else if (action?.type === \"error\") {\n          try {\n            this.#mutateOptions.onError?.(\n              action.error,\n              variables,\n              onMutateResult,\n              context\n            );\n          } catch (e) {\n            void Promise.reject(e);\n          }\n          try {\n            this.#mutateOptions.onSettled?.(\n              void 0,\n              action.error,\n              variables,\n              onMutateResult,\n              context\n            );\n          } catch (e) {\n            void Promise.reject(e);\n          }\n        }\n      }\n      this.listeners.forEach((listener) => {\n        listener(this.#currentResult);\n      });\n    });\n  }\n};\nexport {\n  MutationObserver\n};\n//# sourceMappingURL=mutationObserver.js.map","\"use client\";\n\n// src/useMutation.ts\nimport * as React from \"react\";\nimport {\n  MutationObserver,\n  noop,\n  notifyManager,\n  shouldThrowError\n} from \"@tanstack/query-core\";\nimport { useQueryClient } from \"./QueryClientProvider.js\";\nfunction useMutation(options, queryClient) {\n  const client = useQueryClient(queryClient);\n  const [observer] = React.useState(\n    () => new MutationObserver(\n      client,\n      options\n    )\n  );\n  React.useEffect(() => {\n    observer.setOptions(options);\n  }, [observer, options]);\n  const result = React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) => observer.subscribe(notifyManager.batchCalls(onStoreChange)),\n      [observer]\n    ),\n    () => observer.getCurrentResult(),\n    () => observer.getCurrentResult()\n  );\n  const mutate = React.useCallback(\n    (variables, mutateOptions) => {\n      observer.mutate(variables, mutateOptions).catch(noop);\n    },\n    [observer]\n  );\n  if (result.error && shouldThrowError(observer.options.throwOnError, [result.error])) {\n    throw result.error;\n  }\n  return { ...result, mutate, mutateAsync: result.mutate };\n}\nexport {\n  useMutation\n};\n//# sourceMappingURL=useMutation.js.map","/* __next_internal_action_entry_do_not_use__ [{\"40bdfbea698c59dd2879421a45a56f1fa4fe5109a6\":\"saveMemberAction\"},\"app/actions.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_1=/*#__PURE__*/createServerReference(\"40bdfbea698c59dd2879421a45a56f1fa4fe5109a6\",callServer,void 0,findSourceMapURL,\"saveMemberAction\");export{$$RSC_SERVER_ACTION_1 as saveMemberAction};","export const translations = {\n  en: {\n    appTitle: \"Robinson Family Tree\",\n    tree: \"Tree\",\n    directory: \"Directory\",\n    settings: \"Settings\",\n    searchPlaceholder: \"Find family member...\",\n    export: \"Export SQL\",\n    addMember: \"Add Member\",\n    addCenterMember: \"Add Center Member\",\n    emptyStateTitle: \"Start Your Family Tree\",\n    emptyStateDesc: \"No family members found. Please add yourself as the center member to begin.\",\n    name: \"Name\",\n    nameZh: \"Name (Chinese)\",\n    role: \"Role / Relation\",\n    birthDate: \"Birth Date\",\n    location: \"Location\",\n    save: \"Save\",\n    cancel: \"Cancel\",\n    delete: \"Delete\",\n    edit: \"Edit\",\n    setAsSelf: \"Set as Me\",\n    isSelf: \"Me\",\n    connectPrompt: \"Drag from a dot to connect\",\n    connectionLabel: \"Relationship Label\",\n    connectionLabelZh: \"Relationship Label (CN)\",\n    sourceHandle: \"Source Position\",\n    targetHandle: \"Target Position\",\n    top: \"Top\",\n    right: \"Right\",\n    bottom: \"Bottom\",\n    left: \"Left\",\n    male: \"Male\",\n    female: \"Female\",\n    centerOnMe: \"Reset to Me\",\n    lock: \"Lock\",\n    unlock: \"Unlock\",\n    autoArrange: \"Auto Arrange\",\n    lineColor: \"Line Color\",\n    lineStyle: \"Line Style\",\n    solid: \"Solid\",\n    dashed: \"Dashed\",\n    dotted: \"Dotted\",\n    calculatedRelation: \"Relation to You\"\n  },\n  zh: {\n    appTitle: \"\",\n    tree: \"\",\n    directory: \"\",\n    settings: \"\",\n    searchPlaceholder: \"...\",\n    export: \" SQL\",\n    addMember: \"\",\n    addCenterMember: \"\",\n    emptyStateTitle: \"\",\n    emptyStateDesc: \"\",\n    name: \"\",\n    nameZh: \"\",\n    role: \" / \",\n    birthDate: \"\",\n    location: \"\",\n    save: \"\",\n    cancel: \"\",\n    delete: \"\",\n    edit: \"\",\n    setAsSelf: \"\",\n    isSelf: \"\",\n    connectPrompt: \"\",\n    connectionLabel: \"\",\n    connectionLabelZh: \" ()\",\n    sourceHandle: \"\",\n    targetHandle: \"\",\n    top: \"\",\n    right: \"\",\n    bottom: \"\",\n    left: \"\",\n    male: \"\",\n    female: \"\",\n    centerOnMe: \"\",\n    lock: \"\",\n    unlock: \"\",\n    autoArrange: \"\",\n    lineColor: \"\",\n    lineStyle: \"\",\n    solid: \"\",\n    dashed: \"\",\n    dotted: \"\",\n    calculatedRelation: \"\"\n  }\n};","import React from 'react';\n\nconst SettingsView: React.FC = () => {\n    return (\n        <div className=\"flex-1 overflow-y-auto pt-24 pb-20 px-6 md:px-10 bg-background-light dark:bg-background-dark\">\n            <div className=\"max-w-[960px] mx-auto flex flex-col gap-8 animate-fade-in\">\n                {/* Header */}\n                <div className=\"flex flex-wrap justify-between gap-4 p-4 items-end\">\n                    <div className=\"flex flex-col gap-3\">\n                        <h1 className=\"text-slate-900 dark:text-white text-4xl font-black leading-tight\">Privacy & Visibility</h1>\n                        <p className=\"text-gray-600 dark:text-gray-400 text-base font-normal max-w-2xl\">\n                            Manage visual hierarchy, control access permissions, and filter specific branches for your family tree visualization.\n                        </p>\n                    </div>\n                    <div className=\"flex gap-3\">\n                        <button className=\"flex items-center justify-center h-10 px-5 text-sm font-bold bg-white dark:bg-white/10 border border-gray-200 dark:border-white/10 rounded-lg text-slate-900 dark:text-white hover:bg-gray-50 dark:hover:bg-white/20 transition-colors\">\n                            Cancel\n                        </button>\n                        <button className=\"flex items-center justify-center h-10 px-5 text-sm font-bold bg-primary text-slate-900 rounded-lg hover:bg-primary-dark transition-colors shadow-lg shadow-primary/20\">\n                            Save Changes\n                        </button>\n                    </div>\n                </div>\n\n                {/* Depth Slider Card */}\n                <section className=\"rounded-2xl bg-white/70 dark:bg-card-dark backdrop-blur-md border border-white/60 dark:border-white/5 shadow-sm overflow-hidden p-6 md:p-8\">\n                    <div className=\"flex items-center gap-4 mb-6\">\n                        <div className=\"size-10 rounded-full bg-primary/20 flex items-center justify-center text-primary-dark dark:text-primary\">\n                            <span className=\"material-symbols-outlined\">layers</span>\n                        </div>\n                        <div>\n                            <h2 className=\"text-xl font-bold text-slate-900 dark:text-white\">Visualization Depth</h2>\n                            <p className=\"text-sm text-gray-500 dark:text-gray-400\">Control how many generations are loaded by default.</p>\n                        </div>\n                    </div>\n\n                    <div className=\"relative flex w-full flex-col gap-6\">\n                        <div className=\"flex w-full items-center justify-between\">\n                            <p className=\"text-slate-900 dark:text-white text-lg font-bold\">Level 3: Great-Grandparents</p>\n                            <div className=\"px-3 py-1 rounded-full bg-primary/20 text-xs font-bold text-primary-dark dark:text-primary uppercase tracking-wide\">62 Profiles Visible</div>\n                        </div>\n                        \n                        <div className=\"relative w-full h-12 flex items-center group\">\n                            <div className=\"absolute w-full h-2 bg-gray-200 dark:bg-white/10 rounded-full overflow-hidden\">\n                                <div className=\"h-full bg-primary w-[60%] rounded-full\"></div>\n                            </div>\n                            <input \n                                type=\"range\" \n                                min=\"1\" \n                                max=\"5\" \n                                defaultValue=\"3\" \n                                className=\"absolute w-full h-full opacity-0 cursor-pointer z-10\" \n                            />\n                            {/* Visual Dots */}\n                            <div className=\"absolute w-full flex justify-between px-1 pointer-events-none\">\n                                {[1,2,3,4,5].map(i => (\n                                    <div key={i} className={`size-4 rounded-full border-2 border-white dark:border-gray-800 transition-all ${i <= 3 ? 'bg-primary scale-110' : 'bg-gray-300 dark:bg-white/20'}`}></div>\n                                ))}\n                            </div>\n                        </div>\n                    </div>\n                </section>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n                    {/* Branch Filters */}\n                    <section className=\"rounded-2xl bg-white/70 dark:bg-card-dark backdrop-blur-md border border-white/60 dark:border-white/5 shadow-sm p-6 md:p-8 flex flex-col h-full\">\n                         <div className=\"flex items-center gap-4 mb-6\">\n                            <div className=\"size-10 rounded-full bg-primary/20 flex items-center justify-center text-primary-dark dark:text-primary\">\n                                <span className=\"material-symbols-outlined\">account_tree</span>\n                            </div>\n                            <div>\n                                <h2 className=\"text-xl font-bold text-slate-900 dark:text-white\">Branch Filters</h2>\n                                <p className=\"text-sm text-gray-500 dark:text-gray-400\">Toggle visibility of specific family lines.</p>\n                            </div>\n                        </div>\n                        <div className=\"flex flex-col gap-6\">\n                            {[\n                                { title: 'Paternal Side', sub: \"Father's ancestors\", active: true },\n                                { title: 'Maternal Side', sub: \"Mother's ancestors\", active: true },\n                                { title: 'In-Laws & Step-Family', sub: \"Connected by marriage\", active: false },\n                            ].map((item, i) => (\n                                <div key={i} className=\"flex items-center justify-between cursor-pointer\">\n                                    <div className=\"flex flex-col\">\n                                        <span className=\"text-base font-semibold text-slate-900 dark:text-white\">{item.title}</span>\n                                        <span className=\"text-xs text-gray-500 dark:text-gray-400\">{item.sub}</span>\n                                    </div>\n                                    <div className={`relative inline-flex h-7 w-12 items-center rounded-full transition-colors duration-200 ${item.active ? 'bg-primary' : 'bg-gray-300 dark:bg-white/20'}`}>\n                                        <span className={`inline-block size-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${item.active ? 'translate-x-6' : 'translate-x-1'}`}></span>\n                                    </div>\n                                </div>\n                            ))}\n                        </div>\n                    </section>\n\n                    {/* Privacy Level */}\n                    <section className=\"rounded-2xl bg-white/70 dark:bg-card-dark backdrop-blur-md border border-white/60 dark:border-white/5 shadow-sm p-6 md:p-8 flex flex-col h-full\">\n                         <div className=\"flex items-center gap-4 mb-6\">\n                            <div className=\"size-10 rounded-full bg-primary/20 flex items-center justify-center text-primary-dark dark:text-primary\">\n                                <span className=\"material-symbols-outlined\">lock</span>\n                            </div>\n                            <div>\n                                <h2 className=\"text-xl font-bold text-slate-900 dark:text-white\">Privacy Level</h2>\n                                <p className=\"text-sm text-gray-500 dark:text-gray-400\">Who can view your living relatives?</p>\n                            </div>\n                        </div>\n                        <div className=\"flex flex-col gap-4\">\n                             {[\n                                { title: 'Public', sub: 'Visible to all users', checked: false },\n                                { title: 'Family Members Only', sub: 'Only invited members', checked: true },\n                                { title: 'Private', sub: 'Only you', checked: false }\n                             ].map((opt, i) => (\n                                <label key={i} className={`flex items-start gap-3 p-3 rounded-xl border cursor-pointer transition-colors ${opt.checked ? 'border-primary/50 bg-primary/10' : 'border-transparent hover:bg-black/5 dark:hover:bg-white/5'}`}>\n                                    <input type=\"radio\" name=\"privacy\" defaultChecked={opt.checked} className=\"mt-1 text-primary focus:ring-primary bg-transparent\" />\n                                    <div className=\"flex flex-col\">\n                                        <span className=\"text-sm font-bold text-slate-900 dark:text-white\">{opt.title}</span>\n                                        <span className=\"text-xs text-gray-500 dark:text-gray-400\">{opt.sub}</span>\n                                    </div>\n                                </label>\n                             ))}\n                        </div>\n                    </section>\n                </div>\n\n                <section className=\"rounded-2xl bg-gradient-to-r from-gray-900 to-gray-800 dark:from-black dark:to-[#1a1a1a] p-8 text-white flex flex-col md:flex-row items-center justify-between gap-6 shadow-lg\">\n                    <div className=\"flex flex-col gap-2\">\n                        <h3 className=\"text-xl font-bold\">Need more control?</h3>\n                        <p className=\"text-white/70 max-w-lg text-sm\">Our Advanced Privacy Shield offers granular control over every single profile in your tree.</p>\n                    </div>\n                    <button className=\"whitespace-nowrap px-6 py-3 bg-white/10 hover:bg-white/20 border border-white/20 rounded-lg font-bold text-sm transition-all flex items-center gap-2\">\n                        <span className=\"material-symbols-outlined text-[18px]\">verified_user</span>\n                        View Advanced Options\n                    </button>\n                </section>\n            </div>\n        </div>\n    );\n};\n\nexport default SettingsView;","import { Connection, FamilyMember } from '../types';\n\n// Map of Source-to-Target Label -> Inverse (Target-to-Source) generic classification\n// Example: If A -> B is \"Son\", then B -> A is a \"Parent\"\nconst INVERSE_MAP: Record<string, string> = {\n    'son': 'parent',\n    'daughter': 'parent',\n    'child': 'parent',\n    'father': 'child',\n    'mother': 'child',\n    'parent': 'child',\n    'brother': 'sibling',\n    'sister': 'sibling',\n    'sibling': 'sibling',\n    'husband': 'wife',\n    'wife': 'husband',\n    'spouse': 'spouse',\n    'ex-husband': 'ex-wife',\n    'ex-wife': 'ex-husband',\n    'partner': 'partner'\n};\n\nconst getInverseLabel = (originalLabel: string, sourceMember: FamilyMember): string => {\n    const lowerLabel = originalLabel.toLowerCase();\n    const genericInverse = INVERSE_MAP[lowerLabel] || 'relative';\n\n    if (genericInverse === 'parent') {\n        return sourceMember.gender === 'male' ? 'Father' : 'Mother';\n    }\n    if (genericInverse === 'child') {\n        return sourceMember.gender === 'male' ? 'Son' : 'Daughter';\n    }\n    if (genericInverse === 'sibling') {\n        return sourceMember.gender === 'male' ? 'Brother' : 'Sister';\n    }\n    // For specific matches like husband/wife, return the map value directly if it exists, else capitalised generic\n    if (INVERSE_MAP[lowerLabel]) return INVERSE_MAP[lowerLabel].charAt(0).toUpperCase() + INVERSE_MAP[lowerLabel].slice(1);\n\n    return genericInverse.charAt(0).toUpperCase() + genericInverse.slice(1);\n};\n\n/**\n * Calculates the relationship string for a target node relative to the \"Self\" node.\n * Handles both direct and reverse connections.\n */\nexport const calculateRelationshipToSelf = (\n    targetId: string, \n    members: FamilyMember[], \n    connections: Connection[],\n    isChinese: boolean\n): string | null => {\n    const selfNode = members.find(m => m.isSelf);\n    if (!selfNode || selfNode.id === targetId) return null;\n\n    // Build Adjacency List\n    // We store { to: string, label: string }\n    const adj: Record<string, { to: string, label: string }[]> = {};\n    \n    connections.forEach(conn => {\n        if (!adj[conn.sourceId]) adj[conn.sourceId] = [];\n        if (!adj[conn.targetId]) adj[conn.targetId] = [];\n        \n        const sourceMember = members.find(m => m.id === conn.sourceId);\n        const targetMember = members.find(m => m.id === conn.targetId);\n\n        if (!sourceMember || !targetMember) return;\n\n        // 1. Forward Edge: Source -> Target\n        // If the label is \"Son\", it means Target is the Son of Source.\n        // So traversal Source -> Target yields \"Son\".\n        adj[conn.sourceId].push({ \n            to: conn.targetId, \n            label: isChinese && conn.labelZh ? conn.labelZh : conn.label \n        });\n        \n        // 2. Reverse Edge: Target -> Source\n        // If the label is \"Son\" (Target is Son of Source),\n        // Then traversal Target -> Source means Source is \"Father\" (if male) of Target.\n        const inverseLabel = isChinese \n            ? \"/\" // Simplified for Chinese dynamic calculation, ideally needs a similar map\n            : getInverseLabel(conn.label, sourceMember);\n\n        // Simple Chinese mapping override for common terms\n        let finalInverse = inverseLabel;\n        if (isChinese) {\n             const mapZh: Record<string, string> = {\n                'Son': '', 'Daughter': '', // If source is male\n                'Father': '', 'Mother': '', // If source is male\n             };\n             // A proper Chinese kinship algo is complex, falling back to English logic or basic string\n             // For this demo, we will rely on the English calculation and basic translation or user manual input\n             // Ideally, Chinese requires specific fields. We will stick to the generated English one or generic.\n             finalInverse = \"Linked\"; // Placeholder for complex CH logic, or reuse English logic translated\n             if (inverseLabel === 'Father') finalInverse = '';\n             if (inverseLabel === 'Mother') finalInverse = '';\n             if (inverseLabel === 'Son') finalInverse = '';\n             if (inverseLabel === 'Daughter') finalInverse = '';\n             if (inverseLabel === 'Brother') finalInverse = '';\n             if (inverseLabel === 'Sister') finalInverse = '';\n             if (inverseLabel === 'Wife') finalInverse = '';\n             if (inverseLabel === 'Husband') finalInverse = '';\n        }\n\n        adj[conn.targetId].push({ \n            to: conn.sourceId, \n            label: finalInverse\n        });\n    });\n\n    // BFS\n    const queue: { id: string, path: string[] }[] = [{ id: selfNode.id, path: [] }];\n    const visited = new Set<string>([selfNode.id]);\n\n    while (queue.length > 0) {\n        const { id, path } = queue.shift()!;\n        \n        if (id === targetId) {\n            return path.join('  ');\n        }\n\n        const neighbors = adj[id] || [];\n        for (const neighbor of neighbors) {\n            if (!visited.has(neighbor.to)) {\n                visited.add(neighbor.to);\n                // Limit depth\n                if (path.length < 3) {\n                    queue.push({ \n                        id: neighbor.to, \n                        path: [...path, neighbor.label] \n                    });\n                }\n            }\n        }\n    }\n\n    return null;\n};","import React, { useState } from 'react';\n\nconst Timeline: React.FC = () => {\n    const [year, setYear] = useState(2024);\n    const [isExpanded, setIsExpanded] = useState(true);\n\n    return (\n        <div \n            className={`absolute bottom-0 left-0 right-0 z-40 transition-transform duration-300 ease-in-out ${isExpanded ? 'translate-y-0' : 'translate-y-full'}`}\n        >\n            {/* Toggle Tab */}\n            <button \n                onClick={() => setIsExpanded(!isExpanded)}\n                className=\"absolute -top-10 left-6 h-10 px-4 bg-white/90 dark:bg-black/90 backdrop-blur-md rounded-t-xl border-t border-x border-white/40 dark:border-white/10 shadow-[0_-4px_10px_rgba(0,0,0,0.05)] flex items-center gap-2 text-xs font-bold text-gray-600 dark:text-gray-300 hover:text-primary transition-colors z-50 group\"\n            >\n                <span className={`material-symbols-outlined text-[18px] transition-transform duration-300 ${isExpanded ? 'rotate-180' : 'rotate-0'}`}>expand_less</span>\n                <span>{isExpanded ? 'Hide Timeline' : 'Timeline'}</span>\n            </button>\n\n            {/* Main Bar */}\n            <div className=\"bg-white/80 dark:bg-black/80 backdrop-blur-xl border-t border-white/40 dark:border-white/10 px-6 md:px-8 py-6 shadow-[0_-4px_30px_rgba(0,0,0,0.03)] h-full\">\n                <div className=\"max-w-7xl mx-auto w-full flex flex-col gap-4\">\n                    <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center gap-2\">\n                            <span className=\"material-symbols-outlined text-primary text-xl\">history_toggle_off</span>\n                            <span className=\"text-sm font-bold text-gray-700 dark:text-gray-200\">Timeline scrubbing</span>\n                        </div>\n                        <div className=\"px-3 py-1 bg-primary/20 text-primary-dark dark:text-primary rounded-lg text-sm font-bold font-mono\">\n                            {year}\n                        </div>\n                    </div>\n                    \n                    <div className=\"relative w-full h-10 flex items-center group\">\n                        {/* Track Background */}\n                        <div className=\"absolute w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden\">\n                             {/* Filled Part */}\n                            <div \n                                className=\"h-full bg-gradient-to-r from-primary/30 via-primary/80 to-primary origin-left\"\n                                style={{ width: `${((year - 1900) / (2024 - 1900)) * 100}%` }}\n                            ></div>\n                        </div>\n                        \n                        {/* Native Range Input for Interaction */}\n                        <input \n                            type=\"range\" \n                            min=\"1900\" \n                            max=\"2024\" \n                            value={year}\n                            onChange={(e) => setYear(parseInt(e.target.value))}\n                            className=\"absolute w-full h-full opacity-0 cursor-ew-resize z-20\"\n                        />\n\n                        {/* Custom Thumb Visual (Positioned by JS) */}\n                        <div \n                            className=\"absolute top-1/2 -translate-y-1/2 w-8 h-8 -ml-4 bg-white dark:bg-gray-800 border-4 border-primary rounded-full shadow-[0_0_15px_rgba(128,236,19,0.5)] pointer-events-none z-10 transition-transform group-hover:scale-110\"\n                            style={{ left: `${((year - 1900) / (2024 - 1900)) * 100}%` }}\n                        >\n                             <div className=\"w-2 h-2 bg-primary rounded-full absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2\"></div>\n                        </div>\n                    </div>\n\n                    <div className=\"flex justify-between text-xs font-semibold text-gray-400 select-none px-1 tracking-wider uppercase\">\n                        <span>1900</span>\n                        <span>1920</span>\n                        <span>1940</span>\n                        <span>1960</span>\n                        <span>1980</span>\n                        <span>2000</span>\n                        <span>2020</span>\n                        <span>2024</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default Timeline;","import { FamilyMember, Connection } from '../types';\n\n// Refactored to accept data as arguments, making it synchronous and pure\n// This avoids needing to make the UI components async just for simple filtering\nexport const getImmediateFamily = (memberId: string, members: FamilyMember[], connections: Connection[]) => {\n    const family: any[] = [];\n\n    connections.forEach(conn => {\n        if (conn.sourceId === memberId) {\n            const target = members.find(m => m.id === conn.targetId);\n            if (target) family.push({ relation: conn.label, member: target });\n        } else if (conn.targetId === memberId) {\n            const source = members.find(m => m.id === conn.sourceId);\n            if (source) family.push({ relation: \"Linked by \" + conn.label, member: source });\n        }\n    });\n\n    return family;\n};\n","import React from 'react';\nimport { FamilyMember } from '../types';\n\ninterface DirectoryViewProps {\n    onSelect: (id: string) => void;\n    showChinese: boolean;\n    members: FamilyMember[];\n}\n\nconst DirectoryView: React.FC<DirectoryViewProps> = ({ onSelect, showChinese, members }) => {\n\n    return (\n        <div className=\"flex-1 overflow-y-auto pt-24 pb-40 px-6 md:px-10 bg-background-light dark:bg-background-dark\">\n            <div className=\"max-w-[1400px] mx-auto flex flex-col gap-8\">\n                \n                {/* Stats */}\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                    <div className=\"flex flex-col gap-1 p-5 rounded-xl bg-white dark:bg-card-dark border border-gray-100 dark:border-white/5 shadow-sm\">\n                        <div className=\"flex justify-between items-start\">\n                            <p className=\"text-gray-500 dark:text-gray-400 text-sm font-medium\">Total Members</p>\n                            <span className=\"material-symbols-outlined text-primary\">groups</span>\n                        </div>\n                        <p className=\"text-2xl font-bold text-slate-900 dark:text-white\">{members.length}</p>\n                    </div>\n                </div>\n\n                {/* Grid */}\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n                    {members.map((member) => (\n                        <div key={member.id} className=\"group relative flex flex-col bg-white dark:bg-card-dark rounded-xl border border-gray-100 dark:border-white/5 shadow-sm overflow-hidden transition-all hover:shadow-md hover:border-primary/50\">\n                            <div className=\"p-6 flex flex-col items-center gap-4 border-b border-gray-50 dark:border-white/5\">\n                                <div className=\"size-24 rounded-full bg-cover bg-center border-4 border-white dark:border-gray-700 shadow-sm group-hover:scale-105 transition-transform duration-300\" style={{backgroundImage: `url('${member.avatar}')`}}></div>\n                                <div className=\"text-center\">\n                                    <h3 className=\"text-lg font-bold text-slate-900 dark:text-white\">\n                                        {showChinese && member.nameZh ? member.nameZh : member.name}\n                                    </h3>\n                                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">{member.role}</p>\n                                </div>\n                                <div className=\"flex gap-2\">\n                                    <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 dark:bg-white/10 text-gray-600 dark:text-gray-300 capitalize\">\n                                        {member.gender}\n                                    </span>\n                                </div>\n                            </div>\n                            \n                            <div className=\"p-4 flex flex-col gap-3 text-sm\">\n                                <div className=\"flex items-center gap-3 text-gray-500 dark:text-gray-400\">\n                                    <span className=\"material-symbols-outlined text-[18px]\">cake</span>\n                                    <span>{member.birthDate || 'N/A'}</span>\n                                </div>\n                                <div className=\"flex items-center gap-3 text-gray-500 dark:text-gray-400\">\n                                    <span className=\"material-symbols-outlined text-[18px]\">location_on</span>\n                                    <span>{member.location || 'N/A'}</span>\n                                </div>\n                            </div>\n\n                            <div className=\"mt-auto p-4 bg-gray-50 dark:bg-white/5 flex items-center justify-between\">\n                                <button onClick={() => onSelect(member.id)} className=\"w-full text-center text-xs font-bold text-gray-600 dark:text-gray-300 hover:text-primary transition-colors\">\n                                    View Profile\n                                </button>\n                            </div>\n                        </div>\n                    ))}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default DirectoryView;","import React from 'react';\nimport { ViewMode } from '../types';\nimport { translations } from '../locales';\nimport { dbService } from '../services/dbService';\n\ninterface NavbarProps {\n    currentView: ViewMode;\n    setView: (view: ViewMode) => void;\n    showChinese: boolean;\n    setShowChinese: (show: boolean) => void;\n}\n\nconst Navbar: React.FC<NavbarProps> = ({ currentView, setView, showChinese, setShowChinese }) => {\n    const t = translations[showChinese ? 'zh' : 'en'];\n\n    const handleExport = async () => {\n        const sql = await dbService.exportAsSql();\n        const blob = new Blob([sql], { type: 'text/sql' });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = `robinson_family_tree_${new Date().toISOString().split('T')[0]}.sql`;\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n        URL.revokeObjectURL(url);\n    };\n\n    return (\n        <header className=\"fixed top-0 left-0 right-0 z-50 flex items-center justify-between px-6 py-4 bg-white/60 dark:bg-black/60 backdrop-blur-md border-b border-white/20 dark:border-white/10 shadow-sm\">\n            <div className=\"flex items-center gap-6\">\n                <div className=\"flex items-center gap-3 text-slate-900 dark:text-white cursor-pointer\" onClick={() => setView('tree')}>\n                    <div className=\"p-2 bg-primary/20 rounded-lg text-primary-dark dark:text-primary\">\n                        <span className=\"material-symbols-outlined text-2xl\">account_tree</span>\n                    </div>\n                    <h1 className=\"text-xl font-bold tracking-tight hidden sm:block\">{t.appTitle}</h1>\n                </div>\n            </div>\n\n            <div className=\"flex items-center gap-4\">\n                <nav className=\"hidden lg:flex items-center gap-2 mr-4\">\n                    <button \n                        onClick={() => setView('tree')}\n                        className={`px-4 py-2 rounded-xl text-sm font-bold transition-colors ${currentView === 'tree' ? 'bg-primary/20 text-primary-dark dark:text-primary' : 'hover:bg-black/5 dark:hover:bg-white/10'}`}\n                    >\n                        {t.tree}\n                    </button>\n                    <button \n                        onClick={() => setView('directory')}\n                        className={`px-4 py-2 rounded-xl text-sm font-bold transition-colors ${currentView === 'directory' ? 'bg-primary/20 text-primary-dark dark:text-primary' : 'hover:bg-black/5 dark:hover:bg-white/10'}`}\n                    >\n                        {t.directory}\n                    </button>\n                </nav>\n                \n                {/* Language Toggle */}\n                <button \n                    onClick={() => setShowChinese(!showChinese)}\n                    className=\"flex items-center gap-1.5 px-3 py-1.5 bg-gray-100 dark:bg-white/10 hover:bg-gray-200 dark:hover:bg-white/20 rounded-lg transition-all\"\n                    title=\"Toggle Language\"\n                >\n                    <span className=\"material-symbols-outlined text-[18px] text-gray-600 dark:text-gray-300\">translate</span>\n                    <span className=\"text-xs font-bold font-mono text-gray-700 dark:text-gray-200 w-6 text-center\">\n                        {showChinese ? 'CN' : 'EN'}\n                    </span>\n                </button>\n\n                <div className=\"flex items-center gap-2\">\n                    <button \n                        onClick={handleExport}\n                        className=\"flex items-center gap-2 px-4 py-2 bg-primary hover:bg-primary-dark text-slate-900 rounded-xl text-sm font-bold transition-colors shadow-sm active:scale-95\"\n                    >\n                        <span className=\"material-symbols-outlined text-[20px]\">database</span>\n                        <span className=\"hidden xl:inline\">{t.export}</span>\n                    </button>\n                </div>\n                \n                <div className=\"w-px h-8 bg-gray-200 dark:bg-gray-700 mx-1\"></div>\n                \n                <div className=\"h-10 w-10 rounded-full bg-cover bg-center border-2 border-white dark:border-gray-800 shadow-sm cursor-pointer hover:ring-2 hover:ring-primary transition-all\" style={{backgroundImage: \"url('https://picsum.photos/id/64/200/200')\"}}>\n                </div>\n            </div>\n        </header>\n    );\n};\n\nexport default Navbar;\n","import React, { useState, useEffect } from 'react';\nimport { FamilyMember } from '../types';\nimport { translations } from '../locales';\n\ninterface EditMemberModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onSave: (member: FamilyMember) => void;\n    member?: FamilyMember | null;\n    lang: 'en' | 'zh';\n}\n\nconst EditMemberModal: React.FC<EditMemberModalProps> = ({ isOpen, onClose, onSave, member, lang }) => {\n    const t = translations[lang];\n    const [formData, setFormData] = useState<Partial<FamilyMember>>({});\n\n    useEffect(() => {\n        if (isOpen) {\n            setFormData(member ? { ...member } : {\n                id: crypto.randomUUID(),\n                name: '',\n                nameZh: '',\n                role: '',\n                gender: 'male',\n                avatar: `https://picsum.photos/seed/${Date.now()}/200/200`,\n                x: 0,\n                y: 0,\n                isSelf: false\n            });\n        }\n    }, [isOpen, member]);\n\n    if (!isOpen) return null;\n\n    return (\n        <div className=\"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4\">\n            <div className=\"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-md shadow-2xl overflow-hidden border border-gray-100 dark:border-gray-700 animate-[fadeIn_0.2s_ease-out]\">\n                <div className=\"px-6 py-4 border-b border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50 flex justify-between items-center\">\n                    <h3 className=\"font-bold text-lg text-slate-900 dark:text-white\">\n                        {member ? t.edit : t.addMember}\n                    </h3>\n                    <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200\">\n                        <span className=\"material-symbols-outlined\">close</span>\n                    </button>\n                </div>\n                \n                <div className=\"p-6 space-y-4 max-h-[70vh] overflow-y-auto\">\n                    <div className=\"grid grid-cols-2 gap-4\">\n                         <div className=\"space-y-1\">\n                            <label className=\"text-xs font-bold text-gray-500 uppercase\">{t.name}</label>\n                            <input \n                                className=\"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-primary focus:outline-none\"\n                                value={formData.name || ''}\n                                onChange={e => setFormData({...formData, name: e.target.value})}\n                            />\n                        </div>\n                        <div className=\"space-y-1\">\n                            <label className=\"text-xs font-bold text-gray-500 uppercase\">{t.nameZh}</label>\n                            <input \n                                className=\"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-primary focus:outline-none\"\n                                value={formData.nameZh || ''}\n                                onChange={e => setFormData({...formData, nameZh: e.target.value})}\n                            />\n                        </div>\n                    </div>\n\n                    <div className=\"space-y-1\">\n                        <label className=\"text-xs font-bold text-gray-500 uppercase\">{t.role}</label>\n                        <input \n                            className=\"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-primary focus:outline-none\"\n                            value={formData.role || ''}\n                            onChange={e => setFormData({...formData, role: e.target.value})}\n                        />\n                    </div>\n\n                    <div className=\"grid grid-cols-2 gap-4\">\n                         <div className=\"space-y-1\">\n                            <label className=\"text-xs font-bold text-gray-500 uppercase\">{t.birthDate}</label>\n                            <input \n                                className=\"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-primary focus:outline-none\"\n                                value={formData.birthDate || ''}\n                                placeholder=\"YYYY\"\n                                onChange={e => setFormData({...formData, birthDate: e.target.value})}\n                            />\n                        </div>\n                        <div className=\"space-y-1\">\n                            <label className=\"text-xs font-bold text-gray-500 uppercase\">{t.location}</label>\n                            <input \n                                className=\"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-primary focus:outline-none\"\n                                value={formData.location || ''}\n                                onChange={e => setFormData({...formData, location: e.target.value})}\n                            />\n                        </div>\n                    </div>\n\n                    <div className=\"flex items-center gap-4\">\n                        <label className=\"flex items-center gap-2 cursor-pointer\">\n                            <input \n                                type=\"radio\" \n                                name=\"gender\" \n                                checked={formData.gender === 'male'} \n                                onChange={() => setFormData({...formData, gender: 'male'})}\n                                className=\"text-primary focus:ring-primary\" \n                            />\n                            <span className=\"text-sm\">{t.male}</span>\n                        </label>\n                        <label className=\"flex items-center gap-2 cursor-pointer\">\n                            <input \n                                type=\"radio\" \n                                name=\"gender\" \n                                checked={formData.gender === 'female'} \n                                onChange={() => setFormData({...formData, gender: 'female'})}\n                                className=\"text-primary focus:ring-primary\" \n                            />\n                            <span className=\"text-sm\">{t.female}</span>\n                        </label>\n                    </div>\n\n                    <div className=\"pt-2\">\n                        <label className=\"flex items-center gap-3 p-3 border border-primary/30 bg-primary/5 rounded-xl cursor-pointer hover:bg-primary/10 transition-colors\">\n                            <input \n                                type=\"checkbox\" \n                                checked={formData.isSelf || false} \n                                onChange={e => setFormData({...formData, isSelf: e.target.checked})}\n                                className=\"w-5 h-5 text-primary rounded focus:ring-primary border-gray-300\"\n                            />\n                            <div>\n                                <span className=\"block font-bold text-slate-900 dark:text-white\">{t.setAsSelf}</span>\n                                <span className=\"block text-xs text-gray-500\">This will center the map on this person initially</span>\n                            </div>\n                        </label>\n                    </div>\n                </div>\n\n                <div className=\"p-6 pt-2 flex gap-3\">\n                    <button onClick={onClose} className=\"flex-1 py-2.5 rounded-xl font-bold text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\">\n                        {t.cancel}\n                    </button>\n                    <button \n                        onClick={() => onSave(formData as FamilyMember)} \n                        className=\"flex-1 py-2.5 bg-primary hover:bg-primary-dark text-slate-900 rounded-xl font-bold transition-colors shadow-lg shadow-primary/20\"\n                    >\n                        {t.save}\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default EditMemberModal;","import React, { useState, useEffect } from 'react';\nimport { Connection, HandleType, LineStyle } from '../types';\nimport { translations } from '../locales';\n\ninterface EditConnectionModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onSave: (conn: Connection) => void;\n    onDelete: (id: string) => void;\n    connection: Connection | null;\n    lang: 'en' | 'zh';\n}\n\nconst EditConnectionModal: React.FC<EditConnectionModalProps> = ({ isOpen, onClose, onSave, onDelete, connection, lang }) => {\n    const t = translations[lang];\n    const [formData, setFormData] = useState<Partial<Connection>>({});\n\n    useEffect(() => {\n        if (isOpen && connection) {\n            setFormData({ \n                ...connection,\n                color: connection.color || '#80ec13',\n                lineStyle: connection.lineStyle || 'solid'\n            });\n        }\n    }, [isOpen, connection]);\n\n    if (!isOpen || !connection) return null;\n\n    const handles: HandleType[] = ['top', 'right', 'bottom', 'left'];\n    const styles: LineStyle[] = ['solid', 'dashed', 'dotted'];\n\n    const PRESETS = [\n        { en: 'Father', zh: '' },\n        { en: 'Mother', zh: '' },\n        { en: 'Son', zh: '' },\n        { en: 'Daughter', zh: '' },\n        { en: 'Husband', zh: '' },\n        { en: 'Wife', zh: '' },\n        { en: 'Brother', zh: '' },\n        { en: 'Sister', zh: '' },\n        { en: 'Ex-Husband', zh: '' },\n        { en: 'Ex-Wife', zh: '' },\n    ];\n\n    const applyPreset = (p: {en: string, zh: string}) => {\n        setFormData(prev => ({ ...prev, label: p.en, labelZh: p.zh }));\n    };\n\n    return (\n        <div className=\"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4\">\n            <div className=\"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-md shadow-2xl overflow-hidden border border-gray-100 dark:border-gray-700 animate-[fadeIn_0.2s_ease-out]\">\n                <div className=\"px-6 py-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-gray-900/50\">\n                    <h3 className=\"font-bold text-lg text-slate-900 dark:text-white\">Edit Connection</h3>\n                </div>\n                \n                <div className=\"p-6 space-y-5\">\n                    \n                    {/* Presets */}\n                    <div>\n                        <label className=\"text-xs font-bold text-gray-500 uppercase mb-2 block\">Quick Presets</label>\n                        <div className=\"flex flex-wrap gap-2\">\n                            {PRESETS.map((p, i) => (\n                                <button \n                                    key={i}\n                                    onClick={() => applyPreset(p)}\n                                    className=\"px-3 py-1.5 text-xs font-medium bg-gray-100 dark:bg-white/10 hover:bg-primary/20 hover:text-primary-dark dark:hover:text-primary rounded-lg transition-colors border border-transparent hover:border-primary/30\"\n                                >\n                                    {lang === 'zh' ? p.zh : p.en}\n                                </button>\n                            ))}\n                        </div>\n                    </div>\n\n                    <div className=\"grid grid-cols-2 gap-4\">\n                        <div className=\"space-y-1\">\n                            <label className=\"text-xs font-bold text-gray-500 uppercase\">{t.connectionLabel}</label>\n                            <input \n                                className=\"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-primary focus:outline-none\"\n                                value={formData.label || ''}\n                                onChange={e => setFormData({...formData, label: e.target.value})}\n                            />\n                        </div>\n                        <div className=\"space-y-1\">\n                            <label className=\"text-xs font-bold text-gray-500 uppercase\">{t.connectionLabelZh}</label>\n                            <input \n                                className=\"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-primary focus:outline-none\"\n                                value={formData.labelZh || ''}\n                                onChange={e => setFormData({...formData, labelZh: e.target.value})}\n                            />\n                        </div>\n                    </div>\n\n                    {/* Handles */}\n                    <div className=\"grid grid-cols-2 gap-4\">\n                        <div className=\"space-y-1\">\n                            <label className=\"text-xs font-bold text-gray-500 uppercase\">{t.sourceHandle}</label>\n                            <select \n                                className=\"w-full px-2 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm focus:ring-2 focus:ring-primary focus:outline-none\"\n                                value={formData.sourceHandle}\n                                onChange={e => setFormData({...formData, sourceHandle: e.target.value as HandleType})}\n                            >\n                                {handles.map(h => <option key={h} value={h}>{t[h]}</option>)}\n                            </select>\n                        </div>\n                        <div className=\"space-y-1\">\n                            <label className=\"text-xs font-bold text-gray-500 uppercase\">{t.targetHandle}</label>\n                            <select \n                                className=\"w-full px-2 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm focus:ring-2 focus:ring-primary focus:outline-none\"\n                                value={formData.targetHandle}\n                                onChange={e => setFormData({...formData, targetHandle: e.target.value as HandleType})}\n                            >\n                                {handles.map(h => <option key={h} value={h}>{t[h]}</option>)}\n                            </select>\n                        </div>\n                    </div>\n\n                    {/* Styling */}\n                    <div className=\"grid grid-cols-2 gap-4\">\n                        <div className=\"space-y-1\">\n                            <label className=\"text-xs font-bold text-gray-500 uppercase\">{t.lineColor}</label>\n                            <div className=\"flex items-center gap-2 bg-gray-50 dark:bg-gray-900 p-1.5 rounded-lg border border-gray-200 dark:border-gray-700\">\n                                <input \n                                    type=\"color\" \n                                    className=\"h-8 w-8 p-0 border-0 rounded cursor-pointer bg-transparent\"\n                                    value={formData.color || '#80ec13'}\n                                    onChange={e => setFormData({...formData, color: e.target.value})}\n                                />\n                                <span className=\"text-xs text-gray-500 font-mono\">{formData.color}</span>\n                            </div>\n                        </div>\n                        <div className=\"space-y-1\">\n                            <label className=\"text-xs font-bold text-gray-500 uppercase\">{t.lineStyle}</label>\n                            <select \n                                className=\"w-full px-2 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm focus:ring-2 focus:ring-primary focus:outline-none\"\n                                value={formData.lineStyle}\n                                onChange={e => setFormData({...formData, lineStyle: e.target.value as LineStyle})}\n                            >\n                                {styles.map(s => <option key={s} value={s}>{t[s]}</option>)}\n                            </select>\n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"p-6 pt-2 flex gap-3\">\n                     <button \n                        onClick={() => { onDelete(connection.id); onClose(); }} \n                        className=\"p-3 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors\"\n                        title={t.delete}\n                    >\n                        <span className=\"material-symbols-outlined\">delete</span>\n                    </button>\n                    <button onClick={onClose} className=\"flex-1 py-3 rounded-xl font-bold text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\">\n                        {t.cancel}\n                    </button>\n                    <button \n                        onClick={() => onSave(formData as Connection)} \n                        className=\"flex-1 py-3 bg-primary hover:bg-primary-dark text-slate-900 rounded-xl font-bold transition-colors shadow-lg shadow-primary/20\"\n                    >\n                        {t.save}\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default EditConnectionModal;","import { FamilyMember, Connection } from '../types';\nimport { \n  getMembersAction, \n  saveMemberAction, \n  deleteMemberAction, \n  getConnectionsAction, \n  saveConnectionAction, \n  deleteConnectionAction \n} from '../app/actions';\n\n// This service now acts as a bridge to Server Actions\n// Note: All methods are now ASYNC\n\nexport const dbService = {\n  getMembers: async (): Promise<FamilyMember[]> => {\n    try {\n      return await getMembersAction();\n    } catch (e) {\n      console.error(\"Failed to fetch members\", e);\n      return [];\n    }\n  },\n\n  addMember: async (member: FamilyMember) => {\n    await saveMemberAction(member);\n  },\n\n  updateMember: async (member: FamilyMember) => {\n    await saveMemberAction(member);\n  },\n\n  deleteMember: async (id: string) => {\n    await deleteMemberAction(id);\n  },\n\n  // Batch Operations\n  batchDeleteMembers: async (ids: string[]) => {\n    for (const id of ids) {\n      await deleteMemberAction(id);\n    }\n  },\n\n  getConnections: async (): Promise<Connection[]> => {\n    try {\n      return await getConnectionsAction();\n    } catch (e) {\n      console.error(\"Failed to fetch connections\", e);\n      return [];\n    }\n  },\n\n  addConnection: async (conn: Connection) => {\n    await saveConnectionAction(conn);\n  },\n\n  updateConnection: async (conn: Connection) => {\n    await saveConnectionAction(conn);\n  },\n\n  deleteConnection: async (id: string) => {\n    await deleteConnectionAction(id);\n  },\n\n  // Export Logic needs to be client-side generated from fetched data, \n  // or moved to a server action that returns the string.\n  // For simplicity, we assume the caller has the data or we fetch it here.\n  exportAsSql: async () => {\n    const members = await getMembersAction();\n    const connections = await getConnectionsAction();\n    \n    let sql = `-- Robinson Family Tree Export\\n-- Generated on ${new Date().toISOString()}\\n\\n`;\n    \n    sql += `CREATE TABLE IF NOT EXISTS members (\n      id TEXT PRIMARY KEY,\n      name TEXT,\n      name_zh TEXT,\n      role TEXT,\n      birth_date TEXT,\n      location TEXT,\n      avatar TEXT,\n      gender TEXT,\n      is_self BOOLEAN,\n      x INTEGER,\n      y INTEGER\n    );\\n\\n`;\n\n    sql += `CREATE TABLE IF NOT EXISTS connections (\n      id TEXT PRIMARY KEY,\n      source_id TEXT,\n      target_id TEXT,\n      source_handle TEXT,\n      target_handle TEXT,\n      label TEXT,\n      label_zh TEXT,\n      color TEXT,\n      line_style TEXT,\n      FOREIGN KEY(source_id) REFERENCES members(id),\n      FOREIGN KEY(target_id) REFERENCES members(id)\n    );\\n\\n`;\n\n    members.forEach(m => {\n      sql += `INSERT INTO members (id, name, name_zh, role, birth_date, location, avatar, gender, is_self, x, y) VALUES ('${m.id}', '${m.name.replace(/'/g, \"''\")}', '${(m.nameZh||'').replace(/'/g, \"''\")}', '${m.role}', '${m.birthDate||''}', '${m.location||''}', '${m.avatar}', '${m.gender}', ${m.isSelf ? 1 : 0}, ${Math.round(m.x)}, ${Math.round(m.y)});\\n`;\n    });\n    sql += '\\n';\n\n    connections.forEach(c => {\n      sql += `INSERT INTO connections (id, source_id, target_id, source_handle, target_handle, label, label_zh, color, line_style) VALUES ('${c.id}', '${c.sourceId}', '${c.targetId}', '${c.sourceHandle}', '${c.targetHandle}', '${c.label}', '${c.labelZh||''}', '${c.color||'#e5e7eb'}', '${c.lineStyle||'solid'}');\\n`;\n    });\n\n    return sql;\n  },\n\n  // Export as JSON\n  exportAsJson: async () => {\n    const members = await getMembersAction();\n    const connections = await getConnectionsAction();\n    \n    const exportData = {\n      members,\n      connections,\n      metadata: {\n        exportedAt: new Date().toISOString(),\n        version: '1.0',\n        totalMembers: members.length,\n        totalConnections: connections.length\n      }\n    };\n    \n    return JSON.stringify(exportData, null, 2);\n  },\n\n  // Export as CSV\n  exportAsCsv: async () => {\n    const members = await getMembersAction();\n    const connections = await getConnectionsAction();\n    \n    // Members CSV\n    let membersCsv = 'id,name,name_zh,role,birth_date,location,avatar,gender,is_self,x,y\\n';\n    members.forEach(m => {\n      membersCsv += `\"${m.id}\",\"${m.name.replace(/\"/g, '\"\"')}\",\"${(m.nameZh||'').replace(/\"/g, '\"\"')}\",\"${m.role}\",\"${m.birthDate||''}\",\"${m.location||''}\",\"${m.avatar}\",\"${m.gender}\",\"${m.isSelf ? 'true' : 'false'}\",\"${Math.round(m.x)}\",\"${Math.round(m.y)}\"\\n`;\n    });\n    \n    // Connections CSV\n    let connectionsCsv = 'id,source_id,target_id,source_handle,target_handle,label,label_zh,color,line_style\\n';\n    connections.forEach(c => {\n      connectionsCsv += `\"${c.id}\",\"${c.sourceId}\",\"${c.targetId}\",\"${c.sourceHandle}\",\"${c.targetHandle}\",\"${c.label.replace(/\"/g, '\"\"')}\",\"${(c.labelZh||'').replace(/\"/g, '\"\"')}\",\"${c.color||'#e5e7eb'}\",\"${c.lineStyle||'solid'}\"\\n`;\n    });\n    \n    return {\n      members: membersCsv,\n      connections: connectionsCsv\n    };\n  }\n};\n","import React from 'react';\nimport { FamilyMember, Connection } from '../types';\nimport { getImmediateFamily } from '../services/familyService';\n\ninterface ProfileSidebarProps {\n    member: FamilyMember | null;\n    onClose: () => void;\n    onSelectMember: (id: string) => void;\n    showChinese: boolean;\n    onEdit: () => void;\n    onDelete: () => void;\n    members: FamilyMember[];\n    connections: Connection[];\n}\n\nconst ProfileSidebar: React.FC<ProfileSidebarProps> = ({ \n    member, \n    onClose, \n    onSelectMember, \n    showChinese, \n    onEdit, \n    onDelete,\n    members,\n    connections\n}) => {\n    if (!member) return null;\n\n    // Now uses passed props instead of synchronous DB access\n    const relatives = getImmediateFamily(member.id, members, connections);\n\n    return (\n        <aside className=\"absolute top-24 right-6 bottom-32 w-80 md:w-96 bg-white/80 dark:bg-black/80 backdrop-blur-xl border border-white/40 dark:border-white/10 rounded-2xl shadow-2xl p-6 z-30 flex flex-col animate-[slideIn_0.3s_ease-out]\">\n            <style>{`\n                @keyframes slideIn {\n                    from { transform: translateX(100%); opacity: 0; }\n                    to { transform: translateX(0); opacity: 1; }\n                }\n            `}</style>\n            \n            <div className=\"flex items-center justify-between mb-6\">\n                <h2 className=\"text-lg font-bold text-slate-900 dark:text-white\">Profile Details</h2>\n                <button onClick={onClose} className=\"p-1.5 hover:bg-black/5 dark:hover:bg-white/10 rounded-lg transition-colors\">\n                    <span className=\"material-symbols-outlined text-gray-500 text-[20px]\">close</span>\n                </button>\n            </div>\n\n            {/* Header */}\n            <div className=\"flex flex-col items-center mb-6\">\n                <div className=\"w-24 h-24 rounded-full p-1 border-2 border-primary border-dashed mb-3 relative group\">\n                    <div className=\"w-full h-full rounded-full bg-cover bg-center\" style={{backgroundImage: `url('${member.avatar}')`}}></div>\n                    <button \n                        onClick={onEdit}\n                        className=\"absolute bottom-0 right-0 p-1.5 bg-primary rounded-full text-slate-900 shadow-sm hover:scale-110 transition-transform cursor-pointer\"\n                    >\n                        <span className=\"material-symbols-outlined text-[16px]\">edit</span>\n                    </button>\n                </div>\n                <h3 className=\"text-xl font-bold text-slate-900 dark:text-white\">\n                    {showChinese && member.nameZh ? member.nameZh : member.name}\n                </h3>\n                <p className=\"text-sm text-gray-500 dark:text-gray-400\">{member.role}</p>\n                {member.isSelf && (\n                     <span className=\"mt-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-primary/20 text-primary-dark dark:text-primary\">\n                        Center Member (Me)\n                    </span>\n                )}\n            </div>\n\n            {/* Info Grid */}\n            <div className=\"space-y-4 flex-1 overflow-y-auto no-scrollbar pr-1\">\n                <div className=\"grid grid-cols-2 gap-3\">\n                    <div className=\"bg-white/50 dark:bg-white/5 p-3 rounded-xl border border-white/40 dark:border-white/5\">\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-1\">Birth Date</p>\n                        <p className=\"font-semibold text-sm\">{member.birthDate}</p>\n                    </div>\n                    <div className=\"bg-white/50 dark:bg-white/5 p-3 rounded-xl border border-white/40 dark:border-white/5\">\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-1\">Location</p>\n                        <p className=\"font-semibold text-sm\">{member.location}</p>\n                    </div>\n                </div>\n\n                <div className=\"bg-white/50 dark:bg-white/5 p-4 rounded-xl border border-white/40 dark:border-white/5\">\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-2\">Biography</p>\n                    <p className=\"text-sm text-gray-700 dark:text-gray-300 leading-relaxed\">\n                        {member.bio || \"No biography added.\"}\n                    </p>\n                </div>\n\n                <div className=\"pt-4\">\n                    <h4 className=\"text-sm font-bold text-slate-900 dark:text-white mb-3 flex items-center gap-2\">\n                        <span className=\"material-symbols-outlined text-primary text-[18px]\">family_star</span>\n                        Immediate Family\n                    </h4>\n                    <div className=\"space-y-2\">\n                        {relatives.length === 0 && <p className=\"text-xs text-gray-500\">No connections found.</p>}\n                        {relatives.map((rel) => (\n                            <div \n                                key={rel.member.id}\n                                onClick={() => onSelectMember(rel.member.id)}\n                                className=\"flex items-center gap-3 p-2 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg transition-colors cursor-pointer group\"\n                            >\n                                <div className=\"w-8 h-8 rounded-full bg-cover bg-center\" style={{backgroundImage: `url('${rel.member.avatar}')`}}></div>\n                                <div className=\"flex-1\">\n                                    <p className=\"text-sm font-semibold group-hover:text-primary transition-colors\">\n                                        {showChinese && rel.member.nameZh ? rel.member.nameZh : rel.member.name}\n                                    </p>\n                                    <p className=\"text-xs text-gray-500\">{rel.relation}</p>\n                                </div>\n                                <span className=\"material-symbols-outlined text-gray-400 text-[18px]\">chevron_right</span>\n                            </div>\n                        ))}\n                    </div>\n                </div>\n            </div>\n\n            {/* Actions */}\n            <div className=\"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 flex gap-2\">\n                <button \n                    onClick={onEdit}\n                    className=\"flex-1 bg-slate-900 hover:bg-gray-800 text-white dark:bg-white dark:text-black dark:hover:bg-gray-200 py-2.5 rounded-xl text-sm font-bold transition-colors shadow-lg\"\n                >\n                    Edit Profile\n                </button>\n                <button \n                    onClick={onDelete}\n                    className=\"w-10 flex items-center justify-center bg-red-50 hover:bg-red-100 text-red-500 rounded-xl transition-colors\"\n                >\n                    <span className=\"material-symbols-outlined text-[20px]\">delete</span>\n                </button>\n            </div>\n        </aside>\n    );\n};\n\nexport default ProfileSidebar;\n","import React, { useState, useRef, useEffect, useMemo } from 'react';\nimport { FamilyMember, Connection, HandleType } from '../types';\nimport { dbService } from '../services/dbService';\nimport { calculateRelationshipToSelf } from '../services/relationshipService';\nimport { translations } from '../locales';\nimport EditConnectionModal from '../components/EditConnectionModal';\n\ninterface TreeViewProps {\n    selectedId: string | null;\n    onSelect: (id: string) => void;\n    showChinese: boolean;\n    members: FamilyMember[];\n    connections: Connection[];\n    onDataChange: () => void;\n    onEditMember: (member: FamilyMember) => void; // Callback to open App-level modal\n}\n\nconst CARD_WIDTH = 260; \nconst CARD_HEIGHT = 100;\n\nconst TreeView: React.FC<TreeViewProps> = ({ selectedId, onSelect, showChinese, members, connections, onDataChange, onEditMember }) => {\n    const lang = showChinese ? 'zh' : 'en';\n    const t = translations[lang];\n\n    // Local UI State\n    const [scale, setScale] = useState(1);\n    const [offset, setOffset] = useState({ x: 0, y: 0 });\n    const [isLocked, setIsLocked] = useState(true);\n    \n    // Local members state for drag operations\n    const [localMembers, setLocalMembers] = useState<FamilyMember[]>(members);\n    \n    // Interaction States\n    const [draggingNodeId, setDraggingNodeId] = useState<string | null>(null);\n    const [connectingStart, setConnectingStart] = useState<{id: string, handle: HandleType} | null>(null);\n    const [tempLineEnd, setTempLineEnd] = useState<{x: number, y: number} | null>(null);\n    \n    // Alignment Guides\n    const [alignmentGuides, setAlignmentGuides] = useState<{\n        horizontal: number[];\n        vertical: number[];\n    }>({ horizontal: [], vertical: [] });\n    const [snapPosition, setSnapPosition] = useState<{x: number, y: number} | null>(null);\n    \n    // Batch Operations\n    const [selectedMemberIds, setSelectedMemberIds] = useState<string[]>([]);\n\n    // Modals (Only Connection modal stays local as it's view-specific interaction, member modal is global)\n    const [isConnModalOpen, setIsConnModalOpen] = useState(false);\n    const [editingConnection, setEditingConnection] = useState<Connection | null>(null);\n\n    // Pending Connection (Dragging line to empty space)\n    const [pendingConnection, setPendingConnection] = useState<{sourceId: string, sourceHandle: HandleType, endX: number, endY: number} | null>(null);\n\n    const containerRef = useRef<HTMLDivElement>(null);\n    const isCanvasDragging = useRef(false);\n    const lastPos = useRef({ x: 0, y: 0 });\n\n    // Sync local members when props change\n    useEffect(() => {\n        setLocalMembers(members);\n    }, [members]);\n\n    // Center on mount and when self changes\n    useEffect(() => {\n        centerOnSelf();\n    }, [localMembers]); // Only on mount and when members change\n\n    const centerOnSelf = () => {\n        const self = localMembers.find(m => m.isSelf);\n        if (self && containerRef.current) {\n            const { width, height } = containerRef.current.getBoundingClientRect();\n            setOffset({\n                x: (width / 2) - self.x * scale,\n                y: (height / 2) - self.y * scale\n            });\n        }\n    };\n\n    const getHandlePosition = (x: number, y: number, handle: HandleType) => {\n        const cx = x; \n        const cy = y;\n        switch(handle) {\n            case 'top': return { x: cx + CARD_WIDTH/2, y: cy };\n            case 'right': return { x: cx + CARD_WIDTH, y: cy + CARD_HEIGHT/2 };\n            case 'bottom': return { x: cx + CARD_WIDTH/2, y: cy + CARD_HEIGHT };\n            case 'left': return { x: cx, y: cy + CARD_HEIGHT/2 };\n        }\n    };\n\n    const generatePath = (\n        startX: number, startY: number, startHandle: HandleType,\n        endX: number, endY: number, endHandle: HandleType\n    ) => {\n        const dist = Math.abs(endX - startX) + Math.abs(endY - startY);\n        const controlDist = Math.min(200, Math.max(50, dist * 0.4));\n\n        const getControl = (x: number, y: number, h: HandleType, d: number) => {\n            switch(h) {\n                case 'top': return { x, y: y - d };\n                case 'bottom': return { x, y: y + d };\n                case 'left': return { x: x - d, y };\n                case 'right': return { x: x + d, y };\n            }\n        };\n\n        const cp1 = getControl(startX, startY, startHandle, controlDist);\n        const cp2 = getControl(endX, endY, endHandle, controlDist);\n\n        return `M ${startX} ${startY} C ${cp1.x} ${cp1.y}, ${cp2.x} ${cp2.y}, ${endX} ${endY}`;\n    };\n\n    const getDashArray = (style?: string) => {\n        switch(style) {\n            case 'dashed': return '8 4';\n            case 'dotted': return '2 2';\n            default: return '';\n        }\n    };\n\n    // --- Alignment Functions ---\n\n    const GRID_SIZE = 20; // Grid snap size in pixels\n    const ALIGNMENT_THRESHOLD = 5; // Threshold for alignment in pixels\n\n    const calculateAlignmentGuides = (draggingNode: FamilyMember, dx: number, dy: number) => {\n        const guides = { horizontal: [] as number[], vertical: [] as number[] };\n        const newX = draggingNode.x + dx / scale;\n        const newY = draggingNode.y + dy / scale;\n\n        // Calculate grid snap positions\n        const gridSnapX = Math.round(newX / GRID_SIZE) * GRID_SIZE;\n        const gridSnapY = Math.round(newY / GRID_SIZE) * GRID_SIZE;\n\n        // Check alignment with other nodes\n        localMembers.forEach(member => {\n            if (member.id === draggingNode.id) return;\n\n            // Horizontal alignment (same y position)\n            const yDiff = Math.abs(newY - member.y);\n            if (yDiff < ALIGNMENT_THRESHOLD) {\n                guides.horizontal.push(member.y);\n            }\n\n            // Vertical alignment (same x position)\n            const xDiff = Math.abs(newX - member.x);\n            if (xDiff < ALIGNMENT_THRESHOLD) {\n                guides.vertical.push(member.x);\n            }\n\n            // Center alignment\n            const centerYDiff = Math.abs(newY - (member.y + CARD_HEIGHT / 2));\n            if (centerYDiff < ALIGNMENT_THRESHOLD) {\n                guides.horizontal.push(member.y + CARD_HEIGHT / 2);\n            }\n\n            const centerXDiff = Math.abs(newX - (member.x + CARD_WIDTH / 2));\n            if (centerXDiff < ALIGNMENT_THRESHOLD) {\n                guides.vertical.push(member.x + CARD_WIDTH / 2);\n            }\n        });\n\n        return {\n            guides,\n            snapPosition: {\n                x: gridSnapX,\n                y: gridSnapY\n            }\n        };\n    };\n\n    const getSnappedPosition = (x: number, y: number, draggingNode: FamilyMember) => {\n        const { guides, snapPosition: gridSnap } = calculateAlignmentGuides(draggingNode, 0, 0);\n\n        // Check if we should snap to alignment guides\n        let snappedX = x;\n        let snappedY = y;\n\n        // Check horizontal alignment\n        for (const guideY of guides.horizontal) {\n            if (Math.abs(y - guideY) < ALIGNMENT_THRESHOLD) {\n                snappedY = guideY;\n                break;\n            }\n        }\n\n        // Check vertical alignment\n        for (const guideX of guides.vertical) {\n            if (Math.abs(x - guideX) < ALIGNMENT_THRESHOLD) {\n                snappedX = guideX;\n                break;\n            }\n        }\n\n        // If no alignment guides, snap to grid\n        if (snappedX === x) {\n            snappedX = gridSnap.x;\n        }\n        if (snappedY === y) {\n            snappedY = gridSnap.y;\n        }\n\n        return { x: snappedX, y: snappedY };\n    };\n\n    // --- Interaction Handlers ---\n\n    const handleMouseDown = (e: React.MouseEvent) => {\n        if (!e.target || (e.target as HTMLElement).closest('.node-card, button, .handle')) return;\n        isCanvasDragging.current = true;\n        lastPos.current = { x: e.clientX, y: e.clientY };\n    };\n\n    const handleMouseMove = (e: React.MouseEvent) => {\n        const dx = e.clientX - lastPos.current.x;\n        const dy = e.clientY - lastPos.current.y;\n        lastPos.current = { x: e.clientX, y: e.clientY };\n\n        if (draggingNodeId && !isLocked) {\n            const draggingNode = localMembers.find(m => m.id === draggingNodeId);\n            if (draggingNode) {\n                // Calculate alignment guides and snap position\n                const { guides, snapPosition: gridSnap } = calculateAlignmentGuides(draggingNode, dx, dy);\n                \n                // Update alignment guides state\n                setAlignmentGuides(guides);\n                setSnapPosition(gridSnap);\n\n                // Update local state for smooth dragging\n                setLocalMembers(prev => \n                    prev.map(member => \n                        member.id === draggingNodeId\n                            ? { ...member, x: member.x + dx / scale, y: member.y + dy / scale }\n                            : member\n                    )\n                );\n            }\n        } else if (connectingStart) {\n            if (containerRef.current) {\n                const rect = containerRef.current.getBoundingClientRect();\n                const mx = (e.clientX - rect.left - offset.x) / scale;\n                const my = (e.clientY - rect.top - offset.y) / scale;\n                setTempLineEnd({ x: mx, y: my });\n            }\n        } else if (isCanvasDragging.current) {\n            setOffset(prev => ({ x: prev.x + dx, y: prev.y + dy }));\n        }\n    };\n\n    const handleMouseUp = () => {\n        if (draggingNodeId) {\n            const member = localMembers.find(m => m.id === draggingNodeId);\n            if (member) {\n                // Apply snap position if available\n                if (snapPosition) {\n                    const snappedMember = { ...member, x: snapPosition.x, y: snapPosition.y };\n                    // Update local state immediately for visual feedback\n                    setLocalMembers(prev => \n                        prev.map(m => m.id === draggingNodeId ? snappedMember : m)\n                    );\n                    // Save to database with snapped position\n                    dbService.updateMember(snappedMember);\n                } else {\n                    // Save original position\n                    dbService.updateMember(member);\n                }\n                onDataChange();\n            }\n            setDraggingNodeId(null);\n            // Reset alignment guides\n            setAlignmentGuides({ horizontal: [], vertical: [] });\n            setSnapPosition(null);\n        }\n        \n        // Drop to create new member\n        if (connectingStart && tempLineEnd) {\n            const newX = tempLineEnd.x - (CARD_WIDTH/2);\n            const newY = tempLineEnd.y - (CARD_HEIGHT/2);\n            \n            // Apply grid snap to new member position\n            const snappedX = Math.round(newX / GRID_SIZE) * GRID_SIZE;\n            const snappedY = Math.round(newY / GRID_SIZE) * GRID_SIZE;\n            \n            // Create a temporary object to pass to the modal logic\n            const newId = crypto.randomUUID();\n            const newMember: FamilyMember = {\n                id: newId,\n                name: '',\n                role: '',\n                x: snappedX,\n                y: snappedY,\n                gender: 'male',\n                avatar: `https://picsum.photos/seed/${Date.now()}/200/200`\n            };\n\n            // Simplest: Create the member with default values, save to DB, add connection, then open Modal.\n            dbService.addMember(newMember);\n            \n            const newConn: Connection = {\n                id: crypto.randomUUID(),\n                sourceId: connectingStart.id,\n                targetId: newId,\n                sourceHandle: connectingStart.handle,\n                targetHandle: 'top',\n                label: 'Relation',\n                labelZh: ''\n            };\n            dbService.addConnection(newConn);\n            \n            onDataChange(); // Refresh parent\n            setTimeout(() => onEditMember(newMember), 50); // Open modal for the new member\n        }\n\n        setConnectingStart(null);\n        setTempLineEnd(null);\n        isCanvasDragging.current = false;\n    };\n\n    // --- Logic Handlers ---\n\n    const onHandleMouseDown = (e: React.MouseEvent, id: string, handle: HandleType) => {\n        e.stopPropagation();\n        if (isLocked) return;\n        setConnectingStart({ id, handle });\n    };\n\n    const onHandleMouseUp = (e: React.MouseEvent, targetId: string, targetHandle: HandleType) => {\n        e.stopPropagation();\n        if (connectingStart && connectingStart.id !== targetId) {\n            const newConn: Connection = {\n                id: crypto.randomUUID(),\n                sourceId: connectingStart.id,\n                targetId,\n                sourceHandle: connectingStart.handle,\n                targetHandle,\n                label: 'Relation',\n                labelZh: ''\n            };\n            dbService.addConnection(newConn);\n            onDataChange();\n        }\n        setConnectingStart(null);\n        setTempLineEnd(null);\n    };\n\n    const handleSaveConnection = (conn: Connection) => {\n        dbService.updateConnection(conn);\n        onDataChange();\n        setIsConnModalOpen(false);\n        setEditingConnection(null);\n    };\n\n    const handleDeleteConnection = (id: string) => {\n        dbService.deleteConnection(id);\n        onDataChange();\n    };\n\n    const handleEditClick = (e: React.MouseEvent, node: FamilyMember) => {\n        e.stopPropagation();\n        onEditMember(node);\n    };\n\n    // --- Relationship Cache ---\n\n    const relationshipCache = useMemo(() => {\n        const cache = new Map<string, string | null>();\n        localMembers.forEach(member => {\n            const relationPath = calculateRelationshipToSelf(member.id, localMembers, connections, showChinese);\n            cache.set(member.id, relationPath);\n        });\n        return cache;\n    }, [localMembers, connections, showChinese]);\n\n    // --- Empty State ---\n    if (localMembers.length === 0) {\n        return (\n            <div className=\"flex-1 flex flex-col items-center justify-center bg-background-light dark:bg-background-dark p-6\">\n                <div className=\"text-center space-y-6 max-w-md\">\n                    <div className=\"w-24 h-24 bg-primary/20 rounded-full flex items-center justify-center mx-auto text-primary\">\n                        <span className=\"material-symbols-outlined text-5xl\">forest</span>\n                    </div>\n                    <div>\n                        <h2 className=\"text-2xl font-bold text-slate-900 dark:text-white mb-2\">{t.emptyStateTitle}</h2>\n                        <p className=\"text-gray-500 dark:text-gray-400\">{t.emptyStateDesc}</p>\n                    </div>\n                    <button \n                        onClick={() => { \n                             const newMember = { id: crypto.randomUUID(), name: '', role: 'Me', x: 0, y: 0, gender: 'male', avatar: 'https://picsum.photos/200', isSelf: true } as FamilyMember;\n                             onEditMember(newMember);\n                        }}\n                        className=\"px-8 py-3 bg-primary hover:bg-primary-dark text-slate-900 font-bold rounded-xl shadow-lg shadow-primary/20 transition-all hover:scale-105\"\n                    >\n                        {t.addCenterMember}\n                    </button>\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div \n            className=\"flex-1 relative overflow-hidden bg-background-light dark:bg-background-dark cursor-grab active:cursor-grabbing h-full selection:bg-none\"\n            onMouseDown={handleMouseDown}\n            onMouseMove={handleMouseMove}\n            onMouseUp={handleMouseUp}\n            onMouseLeave={handleMouseUp}\n            ref={containerRef}\n        >\n            {/* Grid */}\n            <div className=\"absolute inset-0 bg-grid-pattern dark:bg-grid-pattern-dark bg-grid opacity-40 pointer-events-none\"></div>\n\n            <div \n                className=\"absolute inset-0 transform-gpu transition-transform duration-75 origin-top-left\"\n                style={{ transform: `translate(${offset.x}px, ${offset.y}px) scale(${scale})` }}\n            >\n                {/* Alignment Guides Layer */}\n                <svg className=\"absolute top-0 left-0 overflow-visible z-10\" style={{ width: 1, height: 1 }}>\n                    {/* Horizontal Guides */}\n                    {alignmentGuides.horizontal.map((y, index) => (\n                        <line\n                            key={`h-${index}`}\n                            x1=\"0\"\n                            y1={y}\n                            x2=\"10000\"\n                            y2={y}\n                            stroke=\"#80ec13\"\n                            strokeWidth=\"2\"\n                            strokeDasharray=\"5,5\"\n                            className=\"animate-pulse\"\n                        />\n                    ))}\n                    \n                    {/* Vertical Guides */}\n                    {alignmentGuides.vertical.map((x, index) => (\n                        <line\n                            key={`v-${index}`}\n                            x1={x}\n                            y1=\"0\"\n                            x2={x}\n                            y2=\"10000\"\n                            stroke=\"#80ec13\"\n                            strokeWidth=\"2\"\n                            strokeDasharray=\"5,5\"\n                            className=\"animate-pulse\"\n                        />\n                    ))}\n                </svg>\n\n                {/* SVG Connections Layer */}\n                <svg className=\"absolute top-0 left-0 overflow-visible z-0\" style={{ width: 1, height: 1 }}>\n                    {/* Existing Connections */}\n                    {connections.map((conn) => {\n                        const source = localMembers.find(m => m.id === conn.sourceId);\n                        const target = localMembers.find(m => m.id === conn.targetId);\n                        if (!source || !target) return null;\n                        const start = getHandlePosition(source.x, source.y, conn.sourceHandle);\n                        const end = getHandlePosition(target.x, target.y, conn.targetHandle);\n                        const path = generatePath(start.x, start.y, conn.sourceHandle, end.x, end.y, conn.targetHandle);\n                        \n                        // Center label\n                        const midX = (start.x + end.x) / 2;\n                        const midY = (start.y + end.y) / 2;\n                        \n                        const color = conn.color || (showChinese ? '#e5e7eb' : '#e5e7eb'); \n\n                        return (\n                            <g key={conn.id} className=\"group cursor-pointer\" onClick={(e) => { e.stopPropagation(); setEditingConnection(conn); setIsConnModalOpen(true); }}>\n                                <path d={path} fill=\"none\" stroke=\"transparent\" strokeWidth={15} />\n                                <path \n                                    d={path}\n                                    fill=\"none\"\n                                    stroke={conn.color || '#e5e7eb'}\n                                    strokeWidth={3}\n                                    strokeDasharray={getDashArray(conn.lineStyle)}\n                                    className=\"dark:stroke-gray-600 transition-colors group-hover:stroke-primary/80\"\n                                />\n                                <foreignObject x={midX - 40} y={midY - 12} width={80} height={24}>\n                                    <div \n                                        className=\"flex items-center justify-center px-2 py-0.5 bg-white dark:bg-gray-800 border rounded-full shadow-sm text-[10px] font-bold text-center truncate select-none hover:scale-110 transition-transform\"\n                                        style={{ borderColor: conn.color || '#80ec13', color: conn.color || 'inherit' }}\n                                    >\n                                        {showChinese && conn.labelZh ? conn.labelZh : conn.label}\n                                    </div>\n                                </foreignObject>\n                            </g>\n                        );\n                    })}\n\n                    {/* Temporary Dragging Line */}\n                    {connectingStart && tempLineEnd && (\n                        <path \n                            d={`M ${getHandlePosition(\n                                localMembers.find(m => m.id === connectingStart.id)!.x, \n                                localMembers.find(m => m.id === connectingStart.id)!.y, \n                                connectingStart.handle\n                            ).x} ${getHandlePosition(\n                                localMembers.find(m => m.id === connectingStart.id)!.x, \n                                localMembers.find(m => m.id === connectingStart.id)!.y, \n                                connectingStart.handle\n                            ).y} L ${tempLineEnd.x} ${tempLineEnd.y}`}\n                            fill=\"none\"\n                            stroke=\"#80ec13\"\n                            strokeWidth={2}\n                            strokeDasharray=\"5 5\"\n                        />\n                    )}\n                </svg>\n\n                {/* Nodes Layer */}\n                {localMembers.map((node) => {\n                    const relationPath = relationshipCache.get(node.id);\n\n                    return (\n                        <div \n                            key={node.id}\n                            className={`absolute node-card group ${isLocked ? '' : 'cursor-move'}`}\n                            style={{ \n                                transform: `translate(${node.x}px, ${node.y}px)`,\n                                width: CARD_WIDTH,\n                                height: CARD_HEIGHT\n                            }}\n                            onMouseDown={(e) => { e.stopPropagation(); if(!isLocked) setDraggingNodeId(node.id); }}\n                            onClick={(e) => {\n                                e.stopPropagation();\n                                if (e.ctrlKey || e.metaKey) {\n                                    // Toggle selection for batch operations\n                                    setSelectedMemberIds(prev => {\n                                        if (prev.includes(node.id)) {\n                                            return prev.filter(id => id !== node.id);\n                                        } else {\n                                            return [...prev, node.id];\n                                        }\n                                    });\n                                } else if (e.shiftKey) {\n                                    // Add to selection for batch operations\n                                    setSelectedMemberIds(prev => [...prev, node.id]);\n                                } else {\n                                    // Single selection\n                                    setSelectedMemberIds([node.id]);\n                                    onSelect(node.id);\n                                }\n                            }}\n                            onDoubleClick={(e) => handleEditClick(e, node)}\n                        >\n                            {/* Connection Handles */}\n                            {!isLocked && (['top', 'right', 'bottom', 'left'] as HandleType[]).map(handle => (\n                                <div \n                                    key={handle}\n                                    className={`\n                                        absolute w-4 h-4 bg-white dark:bg-gray-800 border-2 border-primary rounded-full z-30 cursor-crosshair handle\n                                        transition-all hover:scale-150 hover:bg-primary\n                                        ${handle === 'top' ? '-top-2 left-1/2 -translate-x-1/2' : ''}\n                                        ${handle === 'right' ? '-right-2 top-1/2 -translate-y-1/2' : ''}\n                                        ${handle === 'bottom' ? '-bottom-2 left-1/2 -translate-x-1/2' : ''}\n                                        ${handle === 'left' ? '-left-2 top-1/2 -translate-y-1/2' : ''}\n                                        ${connectingStart ? 'opacity-100 scale-110' : 'opacity-0 group-hover:opacity-100'}\n                                    `}\n                                    onMouseDown={(e) => onHandleMouseDown(e, node.id, handle)}\n                                    onMouseUp={(e) => onHandleMouseUp(e, node.id, handle)}\n                                    title={t.connectPrompt}\n                                />\n                            ))}\n\n                            {/* Card Content */}\n                            <div className={`\n                                w-full h-full p-4 rounded-xl flex items-center gap-4 transition-all select-none\n                                ${selectedId === node.id \n                                    ? 'bg-card-light dark:bg-card-dark backdrop-blur-md ring-2 ring-primary shadow-xl border-primary' \n                                    : selectedMemberIds.includes(node.id)\n                                    ? 'bg-card-light dark:bg-card-dark backdrop-blur-md ring-2 ring-blue-500 shadow-xl border-blue-500'\n                                    : 'bg-card-light dark:bg-card-dark backdrop-blur-md border border-white/50 dark:border-white/10 shadow-lg hover:border-primary/50'\n                                }\n                            `}>\n                                <div className=\"relative\">\n                                    <div \n                                        className=\"w-14 h-14 rounded-full bg-cover bg-center border-2 border-white dark:border-gray-700 shadow-sm pointer-events-none\"\n                                        style={{backgroundImage: `url('${node.avatar}')`}}\n                                    ></div>\n                                    {node.isSelf && (\n                                         <div className=\"absolute -bottom-1 -right-1 flex items-center justify-center w-5 h-5 bg-primary rounded-full border-2 border-white dark:border-gray-800 text-[10px] font-bold text-slate-900\" title=\"Me\">\n                                            M\n                                         </div>\n                                    )}\n                                </div>\n                                <div className=\"flex-1 min-w-0 text-left pointer-events-none\">\n                                    <h3 className=\"text-slate-900 dark:text-white font-bold truncate\">\n                                        {showChinese && node.nameZh ? node.nameZh : node.name}\n                                    </h3>\n                                    <p className=\"text-xs text-gray-500 dark:text-gray-400 font-medium\">\n                                        {node.birthDate || 'Unknown'}\n                                    </p>\n                                    \n                                    {/* Calculated Relationship Path */}\n                                    {relationPath && (\n                                        <p className=\"text-[10px] text-primary-dark dark:text-primary font-bold mt-1 truncate\" title={relationPath}>\n                                            {relationPath}\n                                        </p>\n                                    )}\n                                    {!relationPath && (\n                                        <span className=\"inline-block mt-1 text-[10px] uppercase tracking-wider text-gray-400\">{node.role}</span>\n                                    )}\n                                </div>\n                                \n                                {/* Quick Actions */}\n                                {!isLocked && (\n                                    <button \n                                        onClick={(e) => handleEditClick(e, node)}\n                                        className=\"p-1.5 hover:bg-black/5 dark:hover:bg-white/10 rounded-lg text-gray-400 hover:text-primary transition-colors z-20 relative\"\n                                    >\n                                        <span className=\"material-symbols-outlined text-[18px]\">edit</span>\n                                    </button>\n                                )}\n                            </div>\n                        </div>\n                    );\n                })}\n            </div>\n\n            {/* Controls */}\n            <div className=\"absolute bottom-40 left-1/2 -translate-x-1/2 z-20 flex flex-col items-center gap-4\">\n                 <div className=\"flex items-center gap-2 p-2 bg-white/80 dark:bg-black/60 backdrop-blur-md rounded-2xl shadow-lg border border-white/20 dark:border-white/10\">\n                    <button \n                        onClick={() => setIsLocked(!isLocked)}\n                        className={`w-10 h-10 flex items-center justify-center rounded-xl transition-colors ${isLocked ? 'text-gray-500 hover:bg-black/5 dark:hover:bg-white/10' : 'text-primary bg-primary/10 ring-2 ring-primary/20'}`}\n                        title={isLocked ? t.unlock : t.lock}\n                    >\n                        <span className=\"material-symbols-outlined\">{isLocked ? 'lock' : 'lock_open'}</span>\n                    </button>\n                     <div className=\"w-px h-6 bg-gray-300 dark:bg-gray-600 mx-1\"></div>\n                    <button \n                        onClick={() => centerOnSelf()}\n                        className=\"w-10 h-10 flex items-center justify-center rounded-xl hover:bg-black/5 dark:hover:bg-white/10 text-gray-700 dark:text-gray-200 transition-colors\"\n                        title={t.centerOnMe}\n                    >\n                         <span className=\"material-symbols-outlined\">my_location</span>\n                    </button>\n                    <div className=\"w-px h-6 bg-gray-300 dark:bg-gray-600 mx-1\"></div>\n                    <button \n                        onClick={() => setScale(s => Math.max(0.5, s - 0.1))}\n                        className=\"w-10 h-10 flex items-center justify-center rounded-xl hover:bg-black/5 dark:hover:bg-white/10 text-gray-700 dark:text-gray-200 transition-colors\"\n                    >\n                        <span className=\"material-symbols-outlined\">remove</span>\n                    </button>\n                    <div className=\"px-2 text-sm font-semibold text-gray-600 dark:text-gray-300 min-w-[3rem] text-center\">\n                        {Math.round(scale * 100)}%\n                    </div>\n                    <button \n                        onClick={() => setScale(s => Math.min(2, s + 0.1))}\n                        className=\"w-10 h-10 flex items-center justify-center rounded-xl hover:bg-black/5 dark:hover:bg-white/10 text-gray-700 dark:text-gray-200 transition-colors\"\n                    >\n                        <span className=\"material-symbols-outlined\">add</span>\n                    </button>\n                </div>\n            </div>\n\n            {/* Add Member FAB */}\n            <div className=\"absolute bottom-40 right-8 z-20 flex flex-col gap-4 items-end\">\n                <button \n                    onClick={() => { \n                         const newMember = { id: crypto.randomUUID(), name: '', role: '', x: 0, y: 0, gender: 'male', avatar: 'https://picsum.photos/200' } as FamilyMember;\n                         onEditMember(newMember);\n                    }}\n                    className=\"w-16 h-16 bg-primary hover:bg-primary-dark text-slate-900 rounded-2xl shadow-[0_8px_30px_rgb(128,236,19,0.3)] flex items-center justify-center transition-all hover:scale-110 active:scale-95 group\"\n                    title={t.addMember}\n                >\n                    <span className=\"material-symbols-outlined text-3xl\">add</span>\n                </button>\n            </div>\n\n            <EditConnectionModal\n                isOpen={isConnModalOpen}\n                onClose={() => setIsConnModalOpen(false)}\n                onSave={handleSaveConnection}\n                onDelete={handleDeleteConnection}\n                connection={editingConnection}\n                lang={lang}\n            />\n        </div>\n    );\n};\n\nexport default TreeView;"],"names":["ACTION_HMR_REFRESH","ACTION_NAVIGATE","ACTION_REFRESH","ACTION_RESTORE","ACTION_SERVER_ACTION","ACTION_SERVER_PATCH","PrefetchKind","isThenable","promise","then","dispatchAppRouterAction","useActionQueue","dispatch","action","Error","__DEV__","process","env","NODE_ENV","promisesWithDebugInfo","WeakMap","actionQueue","state","setState","React","useState","useAppDevRenderingIndicator","require","appDevRenderingIndicator","stateWithDebugInfo","useMemo","promiseWithDebugInfo","get","undefined","debugInfo","Promise","resolve","asyncState","push","_debugInfo","set","use","callServer","actionId","actionArgs","reject","startTransition","type","findSourceMapURL","basePath","__NEXT_ROUTER_BASEPATH","pathname","filename","startsWith","document","location","origin","includes","url","URL","searchParams","href","createServerReference"],"mappings":"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","ignoreList":[0,1,2,3,4,5,6,13,14,15,16,17,18,19,20,21]}